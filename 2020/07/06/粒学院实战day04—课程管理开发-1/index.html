<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>谷粒学院实战day04—课程管理开发(1) | Ryan</title><meta name="description" content="课程开发模块1、添加课程后端开发导入相关数据库表sql脚本如下： edu_course123456789101112131415161718192021CREATE TABLE &#96;edu_course&#96; (  &#96;id&#96; char(19) NOT NULL COMMENT &#39;课程ID&#39;,  &#96;teacher_id&#96; char(19) NOT NULL COMMENT &#39;课程讲师ID&#39;,  &#96;subj"><meta name="keywords" content="vue,springboot"><meta name="author" content="Ryan"><meta name="copyright" content="Ryan"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://yoursite.com/2020/07/06/%E7%B2%92%E5%AD%A6%E9%99%A2%E5%AE%9E%E6%88%98day04%E2%80%94%E8%AF%BE%E7%A8%8B%E7%AE%A1%E7%90%86%E5%BC%80%E5%8F%91-1/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="谷粒学院实战day04—课程管理开发(1)"><meta property="og:url" content="http://yoursite.com/2020/07/06/%E7%B2%92%E5%AD%A6%E9%99%A2%E5%AE%9E%E6%88%98day04%E2%80%94%E8%AF%BE%E7%A8%8B%E7%AE%A1%E7%90%86%E5%BC%80%E5%8F%91-1/"><meta property="og:site_name" content="Ryan"><meta property="og:description" content="课程开发模块1、添加课程后端开发导入相关数据库表sql脚本如下： edu_course123456789101112131415161718192021CREATE TABLE &#96;edu_course&#96; (  &#96;id&#96; char(19) NOT NULL COMMENT &#39;课程ID&#39;,  &#96;teacher_id&#96; char(19) NOT NULL COMMENT &#39;课程讲师ID&#39;,  &#96;subj"><meta property="og:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><meta property="article:published_time" content="2020-07-06T01:26:00.000Z"><meta property="article:modified_time" content="2020-07-08T08:23:55.677Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="prev" title="谷粒学院实战day05—课程管理开发(2)+微服务springcloud" href="http://yoursite.com/2020/07/08/%E7%B2%92%E5%AD%A6%E9%99%A2%E5%AE%9E%E6%88%98day05%E2%80%94%E8%AF%BE%E7%A8%8B%E7%AE%A1%E7%90%86%E5%BC%80%E5%8F%91-2-%E5%BE%AE%E6%9C%8D%E5%8A%A1springcloud/"><link rel="next" title="谷粒学院实战day03—阿里云对象存储+niginx+easyexcel+课程分类模块开发" href="http://yoursite.com/2020/07/04/%E5%AD%A6%E9%99%A2%E5%AE%9E%E6%88%98day03%E2%80%94%E9%98%BF%E9%87%8C%E4%BA%91%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8-niginx-easyexcel-%E8%AF%BE%E7%A8%8B%E5%88%86%E7%B1%BB%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: {"bookmark":{"message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true
  }</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="Ryan" type="application/atom+xml">
</head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">19</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">23</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">9</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#课程开发模块"><span class="toc-number">1.</span> <span class="toc-text">课程开发模块</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1、添加课程后端开发"><span class="toc-number">1.1.</span> <span class="toc-text">1、添加课程后端开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#导入相关数据库表"><span class="toc-number">1.1.1.</span> <span class="toc-text">导入相关数据库表</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#edu-course"><span class="toc-number">1.1.1.1.</span> <span class="toc-text">edu_course</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#edu-course-description"><span class="toc-number">1.1.1.2.</span> <span class="toc-text">edu_course_description</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#edu-chapter"><span class="toc-number">1.1.1.3.</span> <span class="toc-text">edu_chapter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#edu-video"><span class="toc-number">1.1.1.4.</span> <span class="toc-text">edu_video</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mp生成代码"><span class="toc-number">1.1.2.</span> <span class="toc-text">mp生成代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编写数据封装实体类"><span class="toc-number">1.1.3.</span> <span class="toc-text">编写数据封装实体类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编写service层"><span class="toc-number">1.1.4.</span> <span class="toc-text">编写service层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编写controller层"><span class="toc-number">1.1.5.</span> <span class="toc-text">编写controller层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#swagger测试"><span class="toc-number">1.1.6.</span> <span class="toc-text">swagger测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2、添加课程前端开发"><span class="toc-number">1.2.</span> <span class="toc-text">2、添加课程前端开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#添加路由"><span class="toc-number">1.2.1.</span> <span class="toc-text">添加路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#对应的页面开发"><span class="toc-number">1.2.2.</span> <span class="toc-text">对应的页面开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#info-vue"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">info.vue</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#api开发"><span class="toc-number">1.2.3.</span> <span class="toc-text">api开发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#效果测试"><span class="toc-number">1.2.4.</span> <span class="toc-text">效果测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3、创建课程大纲开发"><span class="toc-number">1.3.</span> <span class="toc-text">3、创建课程大纲开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#章节列表后端接口开发"><span class="toc-number">1.3.1.</span> <span class="toc-text">章节列表后端接口开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#创建chapter的两个章节实体类"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">创建chapter的两个章节实体类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#编写service层-1"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">编写service层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#编写controller层-1"><span class="toc-number">1.3.1.3.</span> <span class="toc-text">编写controller层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#swagger测试："><span class="toc-number">1.3.1.4.</span> <span class="toc-text">swagger测试：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#章节列表前端几口开发"><span class="toc-number">1.3.2.</span> <span class="toc-text">章节列表前端几口开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#api开发-1"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">api开发</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#views视图层开发"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">views视图层开发</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#效果测试："><span class="toc-number">1.3.2.3.</span> <span class="toc-text">效果测试：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#上一步接口完善"><span class="toc-number">1.3.3.</span> <span class="toc-text">上一步接口完善</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#携带id"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">携带id</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#信息回显"><span class="toc-number">1.3.3.2.</span> <span class="toc-text">信息回显</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#编写service层-2"><span class="toc-number">1.3.3.2.1.</span> <span class="toc-text">编写service层</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#编写controller层-2"><span class="toc-number">1.3.3.2.2.</span> <span class="toc-text">编写controller层</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#章节列表的crud"><span class="toc-number">1.3.4.</span> <span class="toc-text">章节列表的crud</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#后端代码"><span class="toc-number">1.3.4.1.</span> <span class="toc-text">后端代码</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#service层接口"><span class="toc-number">1.3.4.1.1.</span> <span class="toc-text">service层接口</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#service层实现类"><span class="toc-number">1.3.4.1.2.</span> <span class="toc-text">service层实现类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#controller层"><span class="toc-number">1.3.4.1.3.</span> <span class="toc-text">controller层</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#sawagger自测"><span class="toc-number">1.3.4.1.4.</span> <span class="toc-text">sawagger自测</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#前端代码"><span class="toc-number">1.3.4.2.</span> <span class="toc-text">前端代码</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#api"><span class="toc-number">1.3.4.2.1.</span> <span class="toc-text">api</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#chapter-vue"><span class="toc-number">1.3.4.2.2.</span> <span class="toc-text">chapter.vue</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#小节列表的crud"><span class="toc-number">1.3.5.</span> <span class="toc-text">小节列表的crud</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#后端代码-1"><span class="toc-number">1.3.5.1.</span> <span class="toc-text">后端代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#前端代码-1"><span class="toc-number">1.3.5.2.</span> <span class="toc-text">前端代码</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#api-1"><span class="toc-number">1.3.5.2.1.</span> <span class="toc-text">api</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#chapter-vue-1"><span class="toc-number">1.3.5.2.2.</span> <span class="toc-text">chapter.vue</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4、发布课程开发"><span class="toc-number">1.4.</span> <span class="toc-text">4、发布课程开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#业务分析"><span class="toc-number">1.4.1.</span> <span class="toc-text">业务分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#后端开发"><span class="toc-number">1.4.2.</span> <span class="toc-text">后端开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#编写数据封装实体类-1"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">编写数据封装实体类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#编写mapper接口"><span class="toc-number">1.4.2.2.</span> <span class="toc-text">编写mapper接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#编写mapper-xml"><span class="toc-number">1.4.2.3.</span> <span class="toc-text">编写mapper.xml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#service层接口-1"><span class="toc-number">1.4.2.4.</span> <span class="toc-text">service层接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#service层实现类-1"><span class="toc-number">1.4.2.5.</span> <span class="toc-text">service层实现类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#controller层-1"><span class="toc-number">1.4.2.6.</span> <span class="toc-text">controller层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#swagger后端自测"><span class="toc-number">1.4.2.7.</span> <span class="toc-text">swagger后端自测</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#前端开发"><span class="toc-number">1.4.3.</span> <span class="toc-text">前端开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#api-2"><span class="toc-number">1.4.3.1.</span> <span class="toc-text">api</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#publish-vue"><span class="toc-number">1.4.3.2.</span> <span class="toc-text">publish.vue</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#测试效果"><span class="toc-number">1.4.3.3.</span> <span class="toc-text">测试效果</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5、课程列表开发"><span class="toc-number">1.5.</span> <span class="toc-text">5、课程列表开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#业务分析-1"><span class="toc-number">1.5.1.</span> <span class="toc-text">业务分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#后端开发-1"><span class="toc-number">1.5.2.</span> <span class="toc-text">后端开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#编写课程查询实体类封装"><span class="toc-number">1.5.2.1.</span> <span class="toc-text">编写课程查询实体类封装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#service层接口-2"><span class="toc-number">1.5.2.2.</span> <span class="toc-text">service层接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#service层实现类-2"><span class="toc-number">1.5.2.3.</span> <span class="toc-text">service层实现类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#controller层-2"><span class="toc-number">1.5.2.4.</span> <span class="toc-text">controller层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#swagger测试-1"><span class="toc-number">1.5.2.5.</span> <span class="toc-text">swagger测试</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#前端开发-1"><span class="toc-number">1.5.3.</span> <span class="toc-text">前端开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#api-3"><span class="toc-number">1.5.3.1.</span> <span class="toc-text">api</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#list-vue"><span class="toc-number">1.5.3.2.</span> <span class="toc-text">list.vue</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#测试"><span class="toc-number">1.5.3.3.</span> <span class="toc-text">测试</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">Ryan</a></span><span class="pull-right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">谷粒学院实战day04—课程管理开发(1)</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-07-06 09:26:00"><i class="far fa-calendar-alt fa-fw"></i> 发表于 2020-07-06</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-07-08 16:23:55"><i class="fas fa-history fa-fw"></i> 更新于 2020-07-08</span></time></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta__icon"></i><span>字数总计:</span><span class="word-count">12.8k</span><span class="post-meta__separator">|</span><i class="far fa-clock fa-fw post-meta__icon"></i><span>阅读时长: 63 分钟</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="far fa-eye fa-fw post-meta__icon"></i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="far fa-comments fa-fw post-meta__icon"></i><span>评论数:</span><a href="/2020/07/06/%E7%B2%92%E5%AD%A6%E9%99%A2%E5%AE%9E%E6%88%98day04%E2%80%94%E8%AF%BE%E7%A8%8B%E7%AE%A1%E7%90%86%E5%BC%80%E5%8F%91-1/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2020/07/06/%E7%B2%92%E5%AD%A6%E9%99%A2%E5%AE%9E%E6%88%98day04%E2%80%94%E8%AF%BE%E7%A8%8B%E7%AE%A1%E7%90%86%E5%BC%80%E5%8F%91-1/" itemprop="commentCount"></span></a></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="课程开发模块"><a href="#课程开发模块" class="headerlink" title="课程开发模块"></a>课程开发模块</h1><h2 id="1、添加课程后端开发"><a href="#1、添加课程后端开发" class="headerlink" title="1、添加课程后端开发"></a>1、添加课程后端开发</h2><h3 id="导入相关数据库表"><a href="#导入相关数据库表" class="headerlink" title="导入相关数据库表"></a>导入相关数据库表</h3><p>sql脚本如下：</p>
<h4 id="edu-course"><a href="#edu-course" class="headerlink" title="edu_course"></a>edu_course</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`edu_course`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'课程ID'</span>,</span><br><span class="line">  <span class="string">`teacher_id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'课程讲师ID'</span>,</span><br><span class="line">  <span class="string">`subject_id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'课程专业ID'</span>,</span><br><span class="line">  <span class="string">`subject_parent_id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">COMMENT</span> <span class="string">'课程专业父级ID'</span>,</span><br><span class="line">  <span class="string">`title`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'课程标题'</span>,</span><br><span class="line">  <span class="string">`price`</span> <span class="built_in">decimal</span>(<span class="number">10</span>,<span class="number">2</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0.00'</span> <span class="keyword">COMMENT</span> <span class="string">'课程销售价格，设置为0则可免费观看'</span>,</span><br><span class="line">  <span class="string">`lesson_num`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'总课时'</span>,</span><br><span class="line">  <span class="string">`cover`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'课程封面图片路径'</span>,</span><br><span class="line">  <span class="string">`buy_count`</span> <span class="built_in">bigint</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'销售数量'</span>,</span><br><span class="line">  <span class="string">`view_count`</span> <span class="built_in">bigint</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'浏览数量'</span>,</span><br><span class="line">  <span class="string">`version`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'1'</span> <span class="keyword">COMMENT</span> <span class="string">'乐观锁'</span>,</span><br><span class="line">  <span class="string">`status`</span> <span class="built_in">varchar</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'Draft'</span> <span class="keyword">COMMENT</span> <span class="string">'课程状态 Draft未发布  Normal已发布'</span>,</span><br><span class="line">  <span class="string">`is_deleted`</span> <span class="built_in">tinyint</span>(<span class="number">3</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'逻辑删除 1（true）已删除， 0（false）未删除'</span>,</span><br><span class="line">  <span class="string">`gmt_create`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</span><br><span class="line">  <span class="string">`gmt_modified`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新时间'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`idx_title`</span> (<span class="string">`title`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`idx_subject_id`</span> (<span class="string">`subject_id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`idx_teacher_id`</span> (<span class="string">`teacher_id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8mb4 ROW_FORMAT=<span class="keyword">COMPACT</span> <span class="keyword">COMMENT</span>=<span class="string">'课程'</span>;</span><br></pre></td></tr></table></figure>

<h4 id="edu-course-description"><a href="#edu-course-description" class="headerlink" title="edu_course_description"></a>edu_course_description</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`edu_course_description`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'课程ID'</span>,</span><br><span class="line">  <span class="string">`description`</span> <span class="built_in">text</span> <span class="keyword">COMMENT</span> <span class="string">'课程简介'</span>,</span><br><span class="line">  <span class="string">`gmt_create`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</span><br><span class="line">  <span class="string">`gmt_modified`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新时间'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8mb4 <span class="keyword">COMMENT</span>=<span class="string">'课程简介'</span>;</span><br></pre></td></tr></table></figure>

<h4 id="edu-chapter"><a href="#edu-chapter" class="headerlink" title="edu_chapter"></a>edu_chapter</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`edu_chapter`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'章节ID'</span>,</span><br><span class="line">  <span class="string">`course_id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'课程ID'</span>,</span><br><span class="line">  <span class="string">`title`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'章节名称'</span>,</span><br><span class="line">  <span class="string">`sort`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'显示排序'</span>,</span><br><span class="line">  <span class="string">`gmt_create`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</span><br><span class="line">  <span class="string">`gmt_modified`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新时间'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`idx_course_id`</span> (<span class="string">`course_id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8mb4 ROW_FORMAT=<span class="keyword">COMPACT</span> <span class="keyword">COMMENT</span>=<span class="string">'课程'</span>;</span><br></pre></td></tr></table></figure>

<h4 id="edu-video"><a href="#edu-video" class="headerlink" title="edu_video"></a>edu_video</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`edu_video`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'视频ID'</span>,</span><br><span class="line">  <span class="string">`course_id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'课程ID'</span>,</span><br><span class="line">  <span class="string">`chapter_id`</span> <span class="built_in">char</span>(<span class="number">19</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'章节ID'</span>,</span><br><span class="line">  <span class="string">`title`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'节点名称'</span>,</span><br><span class="line">  <span class="string">`video_source_id`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'云端视频资源'</span>,</span><br><span class="line">  <span class="string">`video_original_name`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'原始文件名称'</span>,</span><br><span class="line">  <span class="string">`sort`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'排序字段'</span>,</span><br><span class="line">  <span class="string">`play_count`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'播放次数'</span>,</span><br><span class="line">  <span class="string">`is_free`</span> <span class="built_in">tinyint</span>(<span class="number">1</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'是否可以试听：0收费 1免费'</span>,</span><br><span class="line">  <span class="string">`duration`</span> <span class="built_in">float</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'视频时长（秒）'</span>,</span><br><span class="line">  <span class="string">`status`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'Empty'</span> <span class="keyword">COMMENT</span> <span class="string">'Empty未上传 Transcoding转码中  Normal正常'</span>,</span><br><span class="line">  <span class="string">`size`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span> <span class="keyword">COMMENT</span> <span class="string">'视频源文件大小（字节）'</span>,</span><br><span class="line">  <span class="string">`version`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'1'</span> <span class="keyword">COMMENT</span> <span class="string">'乐观锁'</span>,</span><br><span class="line">  <span class="string">`gmt_create`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'创建时间'</span>,</span><br><span class="line">  <span class="string">`gmt_modified`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'更新时间'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`idx_course_id`</span> (<span class="string">`course_id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`idx_chapter_id`</span> (<span class="string">`chapter_id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8mb4 ROW_FORMAT=<span class="keyword">COMPACT</span> <span class="keyword">COMMENT</span>=<span class="string">'课程视频'</span>;</span><br></pre></td></tr></table></figure>

<h3 id="mp生成代码"><a href="#mp生成代码" class="headerlink" title="mp生成代码"></a>mp生成代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">strategy.setInclude(<span class="string">"edu_course"</span>,<span class="string">"edu_course_description"</span>,<span class="string">"edu_chapter"</span>,<span class="string">"edu_video"</span>);</span><br></pre></td></tr></table></figure>

<p>生成代码完成后对实体类进行一些优化：</p>
<ul>
<li>需要自动填充的字段，都加上相应的注解</li>
<li>因为课程简介和课程是一对一的关系，也就是课程id决定课程简介id，所以课程简介的id生成方式需要更改为手动配置</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiModelProperty</span>(value = <span class="string">"课程ID"</span>)</span><br><span class="line"><span class="meta">@TableId</span>(value = <span class="string">"id"</span>, type = IdType.INPUT)</span><br><span class="line"><span class="keyword">private</span> String id;</span><br></pre></td></tr></table></figure>

<h3 id="编写数据封装实体类"><a href="#编写数据封装实体类" class="headerlink" title="编写数据封装实体类"></a>编写数据封装实体类</h3><p>因为编辑课程简介信息的时候，是同时包含基本信息和简介的，生成的实体类无法完全满足需求，所以需要再新建一个vo实体类来封装并返回前端</p>
<p>提示：其实你的vo实体类怎么写，具体还是看业务需求，你得知道前端页面是怎么设计的，需要什么内容，就写什么字段，比如前端想要的内容如下：</p>
<p><img src= "/img/loading.gif" data-src="https://my-pic-bed-01.oss-cn-shenzhen.aliyuncs.com/img/20200706114112.png" alt="image-20200706114112100"></p>
<p><img src= "/img/loading.gif" data-src="https://my-pic-bed-01.oss-cn-shenzhen.aliyuncs.com/img/20200706114403.png" alt="image-20200706114403485"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CourseInfoVo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value = <span class="string">"课程ID"</span>)</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value = <span class="string">"课程讲师ID"</span>)</span><br><span class="line">    <span class="keyword">private</span> String teacherId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value = <span class="string">"课程专业ID"</span>)</span><br><span class="line">    <span class="keyword">private</span> String SubjectId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value = <span class="string">"课程专业父级ID"</span>)</span><br><span class="line">    <span class="keyword">private</span> String subjectParentId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value = <span class="string">"课程标题"</span>)</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value = <span class="string">"课程销售价格，设置为0则可免费观看"</span>)</span><br><span class="line">    <span class="keyword">private</span> BigDecimal price;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value = <span class="string">"总课时"</span>)</span><br><span class="line">    <span class="keyword">private</span> Integer lessonNum;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value = <span class="string">"课程封面图片路径"</span>)</span><br><span class="line">    <span class="keyword">private</span> String cover;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value = <span class="string">"课程简介"</span>)</span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>所以编写vo类还要结合具体的业务需求来设计</p>
<h3 id="编写service层"><a href="#编写service层" class="headerlink" title="编写service层"></a>编写service层</h3><p>接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">EduCourseService</span> <span class="keyword">extends</span> <span class="title">IService</span>&lt;<span class="title">EduCourse</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">String <span class="title">saveCourseInfo</span><span class="params">(CourseInfoVo courseInfoVo)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实现类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduCourseServiceImpl</span> <span class="keyword">extends</span> <span class="title">ServiceImpl</span>&lt;<span class="title">EduCourseMapper</span>, <span class="title">EduCourse</span>&gt; <span class="keyword">implements</span> <span class="title">EduCourseService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EduCourseDescriptionService eduCourseDescriptionService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">saveCourseInfo</span><span class="params">(CourseInfoVo courseInfoVo)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//因为添加课程基本信息的时候，还需要同时添加课程简介，所以需要将数据同事添加到course表和description表</span></span><br><span class="line">        <span class="comment">//1. 添加EduCourse</span></span><br><span class="line">        EduCourse eduCourse = <span class="keyword">new</span> EduCourse();</span><br><span class="line">        BeanUtils.copyProperties(courseInfoVo, eduCourse);</span><br><span class="line">        <span class="keyword">int</span> insert = baseMapper.insert(eduCourse);</span><br><span class="line">        <span class="keyword">if</span> (insert == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">"添加数据失败"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//2. 添加eduCourseDescription</span></span><br><span class="line">        EduCourseDescription eduCourseDescription = <span class="keyword">new</span> EduCourseDescription();</span><br><span class="line">        eduCourseDescription.setDescription(courseInfoVo.getDescription());</span><br><span class="line">        <span class="comment">//因为course和description是一对一的关系，所以description的id也就是course的id，这个别忘了</span></span><br><span class="line">        String cid = eduCourse.getId();</span><br><span class="line">        eduCourseDescription.setId(cid);</span><br><span class="line">        <span class="comment">//这里是EduCourse的实现类，那么怎么在这里将数据添加到简介表中呢？</span></span><br><span class="line">        <span class="comment">//想要用谁就注入谁</span></span><br><span class="line">        eduCourseDescriptionService.save(eduCourseDescription);</span><br><span class="line">        <span class="keyword">return</span> cid;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="编写controller层"><a href="#编写controller层" class="headerlink" title="编写controller层"></a>编写controller层</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/eduservice/edu-course"</span>)</span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduCourseController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EduCourseService eduCourseService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"/addCourseInfo"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">addCourseInfo</span><span class="params">(@RequestBody CourseInfoVo courseInfoVo)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        String id = eduCourseService.saveCourseInfo(courseInfoVo);</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">"id"</span>, id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="swagger测试"><a href="#swagger测试" class="headerlink" title="swagger测试"></a>swagger测试</h3><p>后台自测成功后，继续开发前台接口</p>
<h2 id="2、添加课程前端开发"><a href="#2、添加课程前端开发" class="headerlink" title="2、添加课程前端开发"></a>2、添加课程前端开发</h2><h3 id="添加路由"><a href="#添加路由" class="headerlink" title="添加路由"></a>添加路由</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    path: <span class="string">'/course'</span>,</span><br><span class="line">    component: Layout,</span><br><span class="line">    redirect: <span class="string">'/course/list'</span>,</span><br><span class="line">    name: <span class="string">'课程管理'</span>,</span><br><span class="line">    meta: &#123; <span class="attr">title</span>: <span class="string">'课程管理'</span>, <span class="attr">icon</span>: <span class="string">'example'</span> &#125;,</span><br><span class="line">    children: [</span><br><span class="line">        &#123;</span><br><span class="line">            path: <span class="string">'list'</span>,</span><br><span class="line">            name: <span class="string">'课程列表'</span>,</span><br><span class="line">            component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/edu/course/list'</span>),</span><br><span class="line">            meta: &#123; <span class="attr">title</span>: <span class="string">'课程列表'</span>, <span class="attr">icon</span>: <span class="string">'table'</span> &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            path: <span class="string">'info'</span>,</span><br><span class="line">            name: <span class="string">'添加课程'</span>,</span><br><span class="line">            component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/edu/course/info'</span>),</span><br><span class="line">            meta: &#123; <span class="attr">title</span>: <span class="string">'添加课程'</span>, <span class="attr">icon</span>: <span class="string">'tree'</span> &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            path: <span class="string">'info/:id'</span>,</span><br><span class="line">            name: <span class="string">'EduCourseInfoEdit'</span>,</span><br><span class="line">            component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/edu/course/info'</span>),</span><br><span class="line">            meta: &#123; <span class="attr">title</span>: <span class="string">'编辑课程基本信息'</span>, <span class="attr">noCache</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">            hidden: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            path: <span class="string">'chapter/:id'</span>,</span><br><span class="line">            name: <span class="string">'EduCourseChapterEdit'</span>,</span><br><span class="line">            component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/edu/course/chapter'</span>),</span><br><span class="line">            meta: &#123; <span class="attr">title</span>: <span class="string">'编辑课程大纲'</span>, <span class="attr">noCache</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">            hidden: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            path: <span class="string">'publish/:id'</span>,</span><br><span class="line">            name: <span class="string">'EduCoursePublishEdit'</span>,</span><br><span class="line">            component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/edu/course/publish'</span>),</span><br><span class="line">            meta: &#123; <span class="attr">title</span>: <span class="string">'发布课程'</span>, <span class="attr">noCache</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">            hidden: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="对应的页面开发"><a href="#对应的页面开发" class="headerlink" title="对应的页面开发"></a>对应的页面开发</h3><h4 id="info-vue"><a href="#info-vue" class="headerlink" title="info.vue"></a>info.vue</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"></span><br><span class="line">  &lt;div class&#x3D;&quot;app-container&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h2 style&#x3D;&quot;text-align: center;&quot;&gt;发布新课程&lt;&#x2F;h2&gt;</span><br><span class="line"></span><br><span class="line">    &lt;el-steps :active&#x3D;&quot;1&quot; process-status&#x3D;&quot;wait&quot; align-center style&#x3D;&quot;margin-bottom: 40px;&quot;&gt;</span><br><span class="line">      &lt;el-step title&#x3D;&quot;填写课程基本信息&quot;&#x2F;&gt;</span><br><span class="line">      &lt;el-step title&#x3D;&quot;创建课程大纲&quot;&#x2F;&gt;</span><br><span class="line">      &lt;el-step title&#x3D;&quot;最终发布&quot;&#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;el-steps&gt;</span><br><span class="line"></span><br><span class="line">    &lt;el-form label-width&#x3D;&quot;120px&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;el-form-item label&#x3D;&quot;课程标题&quot;&gt;</span><br><span class="line">            &lt;el-input v-model&#x3D;&quot;courseInfo.title&quot; placeholder&#x3D;&quot; 示例：机器学习项目课：从基础到搭建项目视频课程。专业名称注意大小写&quot;&#x2F;&gt;</span><br><span class="line">        &lt;&#x2F;el-form-item&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- 所属分类 TODO --&gt;</span><br><span class="line">        &lt;!-- 一级分类 --&gt;</span><br><span class="line">        &lt;el-form-item label&#x3D;&quot;课程分类&quot;&gt;</span><br><span class="line">            &lt;el-select</span><br><span class="line">                v-model&#x3D;&quot;courseInfo.subjectParentId&quot;</span><br><span class="line">                placeholder&#x3D;&quot;一级分类&quot; @change&#x3D;&quot;subjectLevelOneChanged&quot;&gt;</span><br><span class="line"></span><br><span class="line">                &lt;el-option</span><br><span class="line">                    v-for&#x3D;&quot;subject in subjectOneList&quot;</span><br><span class="line">                    :key&#x3D;&quot;subject.id&quot;</span><br><span class="line">                    :label&#x3D;&quot;subject.title&quot;</span><br><span class="line">                    :value&#x3D;&quot;subject.id&quot;&#x2F;&gt;</span><br><span class="line"></span><br><span class="line">            &lt;&#x2F;el-select&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!-- 二级分类 --&gt;</span><br><span class="line">            &lt;el-select v-model&#x3D;&quot;courseInfo.subjectId&quot; placeholder&#x3D;&quot;二级分类&quot;&gt;</span><br><span class="line">                &lt;el-option</span><br><span class="line">                    v-for&#x3D;&quot;subject in subjectTwoList&quot;</span><br><span class="line">                    :key&#x3D;&quot;subject.id&quot;</span><br><span class="line">                    :label&#x3D;&quot;subject.title&quot;</span><br><span class="line">                    :value&#x3D;&quot;subject.id&quot;&#x2F;&gt;</span><br><span class="line">            &lt;&#x2F;el-select&gt;</span><br><span class="line">        &lt;&#x2F;el-form-item&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- 课程讲师 TODO --&gt;</span><br><span class="line">        &lt;!-- 课程讲师 --&gt;</span><br><span class="line">        &lt;el-form-item label&#x3D;&quot;课程讲师&quot;&gt;</span><br><span class="line">            &lt;el-select</span><br><span class="line">                v-model&#x3D;&quot;courseInfo.teacherId&quot;</span><br><span class="line">                placeholder&#x3D;&quot;请选择&quot;&gt;</span><br><span class="line"></span><br><span class="line">                &lt;el-option</span><br><span class="line">                    v-for&#x3D;&quot;teacher in teacherList&quot;</span><br><span class="line">                    :key&#x3D;&quot;teacher.id&quot;</span><br><span class="line">                    :label&#x3D;&quot;teacher.name&quot;</span><br><span class="line">                    :value&#x3D;&quot;teacher.id&quot;&#x2F;&gt;</span><br><span class="line"></span><br><span class="line">            &lt;&#x2F;el-select&gt;</span><br><span class="line">        &lt;&#x2F;el-form-item&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &lt;el-form-item label&#x3D;&quot;总课时&quot;&gt;</span><br><span class="line">            &lt;el-input-number :min&#x3D;&quot;0&quot; v-model&#x3D;&quot;courseInfo.lessonNum&quot; controls-position&#x3D;&quot;right&quot; placeholder&#x3D;&quot;请填写课程的总课时数&quot;&#x2F;&gt;</span><br><span class="line">        &lt;&#x2F;el-form-item&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- 课程简介 TODO --&gt;</span><br><span class="line">        &lt;el-form-item label&#x3D;&quot;课程简介&quot;&gt;</span><br><span class="line">            &lt;el-input v-model&#x3D;&quot;courseInfo.description&quot; placeholder&#x3D;&quot;&quot;&#x2F;&gt;</span><br><span class="line">        &lt;&#x2F;el-form-item&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- 课程封面 TODO --&gt;</span><br><span class="line">        &lt;!-- 课程封面--&gt;</span><br><span class="line">        &lt;el-form-item label&#x3D;&quot;课程封面&quot;&gt;</span><br><span class="line"></span><br><span class="line">            &lt;el-upload</span><br><span class="line">                :show-file-list&#x3D;&quot;false&quot;</span><br><span class="line">                :on-success&#x3D;&quot;handleAvatarSuccess&quot;</span><br><span class="line">                :before-upload&#x3D;&quot;beforeAvatarUpload&quot;</span><br><span class="line">                :action&#x3D;&quot;BASE_API+&#39;&#x2F;eduoss&#x2F;fileupload&#39;&quot;</span><br><span class="line">                class&#x3D;&quot;avatar-uploader&quot;&gt;</span><br><span class="line">                &lt;img :src&#x3D;&quot;courseInfo.cover&quot;&gt;</span><br><span class="line">                &lt;p&gt;点击图片更换图片&lt;&#x2F;p&gt;</span><br><span class="line">            &lt;&#x2F;el-upload&gt;</span><br><span class="line"></span><br><span class="line">        &lt;&#x2F;el-form-item&gt;</span><br><span class="line"></span><br><span class="line">        &lt;el-form-item label&#x3D;&quot;课程价格&quot;&gt;</span><br><span class="line">            &lt;el-input-number :min&#x3D;&quot;0&quot; v-model&#x3D;&quot;courseInfo.price&quot; controls-position&#x3D;&quot;right&quot; placeholder&#x3D;&quot;免费课程请设置为0元&quot;&#x2F;&gt; 元</span><br><span class="line">        &lt;&#x2F;el-form-item&gt;</span><br><span class="line"></span><br><span class="line">        &lt;el-form-item&gt;</span><br><span class="line">            &lt;el-button :disabled&#x3D;&quot;saveBtnDisabled&quot; type&#x3D;&quot;primary&quot; @click&#x3D;&quot;saveOrUpdate&quot;&gt;保存并下一步&lt;&#x2F;el-button&gt;</span><br><span class="line">        &lt;&#x2F;el-form-item&gt;</span><br><span class="line">        &lt;&#x2F;el-form&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import course from &#39;@&#x2F;api&#x2F;edu&#x2F;course&#39;</span><br><span class="line">import subject from &#39;@&#x2F;api&#x2F;edu&#x2F;subject&#39;</span><br><span class="line">export default &#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">        return&#123;</span><br><span class="line">            courseInfo: &#123;</span><br><span class="line">                title: &#39;&#39;,</span><br><span class="line">                subjectId: &#39;&#39;,&#x2F;&#x2F;二级分类id</span><br><span class="line">                subjectParentId:&#39;&#39;,&#x2F;&#x2F;一级分类id</span><br><span class="line">                teacherId: &#39;&#39;,</span><br><span class="line">                lessonNum: 0,</span><br><span class="line">                description: &#39;&#39;,</span><br><span class="line">                cover: &#39;&#x2F;static&#x2F;default.jpg&#39;,</span><br><span class="line">                price: 0</span><br><span class="line">            &#125;,</span><br><span class="line">            subjectOneList: [],&#x2F;&#x2F;一级分类列表</span><br><span class="line">            subjectTwoList: [],&#x2F;&#x2F;二级分类列表</span><br><span class="line">            teacherList: [],&#x2F;&#x2F;所属讲师列表</span><br><span class="line">            BASE_API: process.env.BASE_API, &#x2F;&#x2F; 接口API地址</span><br><span class="line">            saveBtnDisabled: false</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    created()&#123;</span><br><span class="line">        &#x2F;&#x2F;初始化讲师列表</span><br><span class="line">        this.findAllTeacher()</span><br><span class="line">        &#x2F;&#x2F;初始化一级分类列表</span><br><span class="line">        this.getOneSubject()</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        &#x2F;&#x2F;上传封面成功后调用的方法</span><br><span class="line">        handleAvatarSuccess(res, file)&#123;</span><br><span class="line">            this.courseInfo.cover &#x3D; res.data.url</span><br><span class="line">        &#125;,</span><br><span class="line">        &#x2F;&#x2F;上传封面之前调用的方法，一般用来定义上传文件的类型、大小等</span><br><span class="line">        beforeAvatarUpload(file)&#123;</span><br><span class="line">            const isJPG &#x3D; file.type &#x3D;&#x3D;&#x3D; &#39;image&#x2F;jpeg&#39;</span><br><span class="line">            const isLt2M &#x3D; file.size &#x2F; 1024 &#x2F; 1024 &lt; 2</span><br><span class="line"></span><br><span class="line">            if (!isJPG) &#123;</span><br><span class="line">                this.$message.error(&#39;上传头像图片只能是 JPG 格式!&#39;)</span><br><span class="line">            &#125;</span><br><span class="line">            if (!isLt2M) &#123;</span><br><span class="line">                this.$message.error(&#39;上传头像图片大小不能超过 2MB!&#39;)</span><br><span class="line">            &#125;</span><br><span class="line">            return isJPG &amp;&amp; isLt2M</span><br><span class="line">        &#125;,</span><br><span class="line">        &#x2F;&#x2F;选好一级分类之后，查询二级分类的信息，属于二级联动的效果（一级没选的话二级是不会有数据的）</span><br><span class="line">        subjectLevelOneChanged(value)&#123;&#x2F;&#x2F;value就是一级分类id值</span><br><span class="line">            &#x2F;&#x2F;遍历所有的一级分类</span><br><span class="line">            for(var i &#x3D; 0; i &lt;&#x3D; this.subjectOneList.length; i++)&#123;</span><br><span class="line">                &#x2F;&#x2F;获取每一个一级分类</span><br><span class="line">                var oneSubject &#x3D; this.subjectOneList[i]</span><br><span class="line">                &#x2F;&#x2F;判断id是否相等</span><br><span class="line">                if(value &#x3D;&#x3D;&#x3D; oneSubject.id)&#123;</span><br><span class="line">                    &#x2F;&#x2F;如果相等则赋值</span><br><span class="line">                    this.subjectTwoList &#x3D; oneSubject.children</span><br><span class="line">                    &#x2F;&#x2F;注意，每当二级分类选好了之后，又想改一级分类，需要将选好的二级分类的值清空</span><br><span class="line">                    this.courseInfo.subjectId &#x3D; &quot;&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#x2F;&#x2F;获取一级分类方法</span><br><span class="line">        getOneSubject()&#123;</span><br><span class="line">            subject.getAllSubject()</span><br><span class="line">                .then(response &#x3D;&gt; &#123;</span><br><span class="line">                    this.subjectOneList &#x3D; response.data.list</span><br><span class="line">                &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        &#x2F;&#x2F;查询所有讲师方法</span><br><span class="line">        findAllTeacher()&#123;</span><br><span class="line">            course.findAllTeacher()</span><br><span class="line">                .then(response &#x3D;&gt; &#123;</span><br><span class="line">                    this.teacherList &#x3D; response.data.items</span><br><span class="line">                &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        saveOrUpdate()&#123;</span><br><span class="line">            course.addCourseInfo(this.courseInfo)</span><br><span class="line">                .then(response &#x3D;&gt; &#123;</span><br><span class="line">                    &#x2F;&#x2F;提示信息</span><br><span class="line">                    this.$message(&#123;</span><br><span class="line">                    type: &#39;success&#39;,</span><br><span class="line">                    message: &#39;添加课程基本信息成功!&#39;</span><br><span class="line">                    &#125;);</span><br><span class="line">                    this.$router.push(&#123;path: &#39;&#x2F;course&#x2F;chapter&#x2F;&#39; + response.data.id&#125;)</span><br><span class="line">                &#125;)</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="api开发"><a href="#api开发" class="headerlink" title="api开发"></a>api开发</h3><p>course.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">'@/utils/request'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">//添加课程，别忘了传参</span></span><br><span class="line">    addCourseInfo(courseInfoVo)&#123;</span><br><span class="line">        <span class="keyword">return</span> request(&#123;</span><br><span class="line">            url: <span class="string">'/eduservice/edu-course/addCourseInfo'</span>,</span><br><span class="line">            method: <span class="string">'post'</span>,</span><br><span class="line">            data: courseInfoVo</span><br><span class="line">          &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//查询所有讲师</span></span><br><span class="line">    findAllTeacher()&#123;</span><br><span class="line">        <span class="keyword">return</span> request(&#123;</span><br><span class="line">            url: <span class="string">'/eduservice/edu-teacher/findAll'</span>,</span><br><span class="line">            method: <span class="string">'get'</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="效果测试"><a href="#效果测试" class="headerlink" title="效果测试"></a>效果测试</h3><p><img src= "/img/loading.gif" data-src="https://my-pic-bed-01.oss-cn-shenzhen.aliyuncs.com/img/20200706101739.png" alt="image-20200706094608487"></p>
<h2 id="3、创建课程大纲开发"><a href="#3、创建课程大纲开发" class="headerlink" title="3、创建课程大纲开发"></a>3、创建课程大纲开发</h2><h3 id="章节列表后端接口开发"><a href="#章节列表后端接口开发" class="headerlink" title="章节列表后端接口开发"></a>章节列表后端接口开发</h3><p>首先为了巩固上一节课学习的内容，我们先来开发章节列表的接口开发</p>
<p>在添加课程基本信息页面点击下一步之后，会跳转到创建课程大纲的页面，而大纲的显示效果我们也采用类似树状的结构显示，一级大纲为章节，二级大纲为小节，例如下面的效果</p>
<p><img src= "/img/loading.gif" data-src="https://my-pic-bed-01.oss-cn-shenzhen.aliyuncs.com/img/20200706203220.png" alt="image-20200706203220852"></p>
<h4 id="创建chapter的两个章节实体类"><a href="#创建chapter的两个章节实体类" class="headerlink" title="创建chapter的两个章节实体类"></a>创建chapter的两个章节实体类</h4><p>ChapterVo</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChapterVo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line">    <span class="keyword">private</span> List&lt;VideoVo&gt; children = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>VideoVo</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VideoVo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="编写service层-1"><a href="#编写service层-1" class="headerlink" title="编写service层"></a>编写service层</h4><p>接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">EduCourseService</span> <span class="keyword">extends</span> <span class="title">IService</span>&lt;<span class="title">EduCourse</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">String <span class="title">saveCourseInfo</span><span class="params">(CourseInfoVo courseInfoVo)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实现类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduChapterServiceImpl</span> <span class="keyword">extends</span> <span class="title">ServiceImpl</span>&lt;<span class="title">EduChapterMapper</span>, <span class="title">EduChapter</span>&gt; <span class="keyword">implements</span> <span class="title">EduChapterService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    EduVideoService eduVideoService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;ChapterVo&gt; <span class="title">getCourseChapters</span><span class="params">(String courseId)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取该课程下的所有的章信息</span></span><br><span class="line">        QueryWrapper&lt;EduChapter&gt; chapterWrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">        chapterWrapper.eq(<span class="string">"course_id"</span>, courseId);</span><br><span class="line">        List&lt;EduChapter&gt; eduChapterList = baseMapper.selectList(chapterWrapper);</span><br><span class="line">        <span class="comment">//获取该课程下的所有的节信息</span></span><br><span class="line">        QueryWrapper&lt;EduVideo&gt; videoWrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">        videoWrapper.eq(<span class="string">"course_id"</span>,courseId);</span><br><span class="line">        List&lt;EduVideo&gt; eduVideos = eduVideoService.list(videoWrapper);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//封装数据</span></span><br><span class="line">        List&lt;ChapterVo&gt; finalList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (EduChapter eduChapter : eduChapterList) &#123;</span><br><span class="line">            ChapterVo chapterVo = <span class="keyword">new</span> ChapterVo();</span><br><span class="line">            BeanUtils.copyProperties(eduChapter, chapterVo);</span><br><span class="line">            finalList.add(chapterVo);</span><br><span class="line"></span><br><span class="line">            List&lt;VideoVo&gt; videoVoList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            <span class="keyword">for</span> (EduVideo eduVideo : eduVideos) &#123;</span><br><span class="line">                <span class="keyword">if</span>(eduVideo.getChapterId().equals(eduChapter.getId()))&#123;</span><br><span class="line">                    VideoVo videoVo = <span class="keyword">new</span> VideoVo();</span><br><span class="line">                    BeanUtils.copyProperties(eduVideo, videoVo);</span><br><span class="line">                    videoVoList.add(videoVo);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            chapterVo.setChildren(videoVoList);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> finalList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="编写controller层-1"><a href="#编写controller层-1" class="headerlink" title="编写controller层"></a>编写controller层</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/eduservice/edu-chapter"</span>)</span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduChapterController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    EduChapterService eduChapterService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//查询某个课程的章节列表</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/getCourseChapters/&#123;courseId&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">getCourseChapter</span><span class="params">(@PathVariable String courseId)</span></span>&#123;</span><br><span class="line">         List&lt;ChapterVo&gt; chapterList = eduChapterService.getCourseChapters(courseId);</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">"chapterList"</span>, chapterList);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="swagger测试："><a href="#swagger测试：" class="headerlink" title="swagger测试："></a>swagger测试：</h4><p><img src= "/img/loading.gif" data-src="https://my-pic-bed-01.oss-cn-shenzhen.aliyuncs.com/img/20200706203413.png" alt="image-20200706203413729"></p>
<p>后端自测成功，接着开发前端</p>
<h3 id="章节列表前端几口开发"><a href="#章节列表前端几口开发" class="headerlink" title="章节列表前端几口开发"></a>章节列表前端几口开发</h3><h4 id="api开发-1"><a href="#api开发-1" class="headerlink" title="api开发"></a>api开发</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">'@/utils/request'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">//根据课程id查询章节列表</span></span><br><span class="line">    getChaptersByCourseId(courseId)&#123;</span><br><span class="line">        <span class="keyword">return</span> request(&#123;</span><br><span class="line">            url: <span class="string">'/eduservice/edu-chapter/getCourseChapters/'</span> + courseId,</span><br><span class="line">            method: <span class="string">'get'</span></span><br><span class="line">          &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="views视图层开发"><a href="#views视图层开发" class="headerlink" title="views视图层开发"></a>views视图层开发</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"></span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"app-container"</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h2 style=<span class="string">"text-align: center;"</span>&gt;发布新课程&lt;<span class="regexp">/h2&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    &lt;el-steps :active="2" process-status="wait" align-center style="margin-bottom: 40px;"&gt;</span></span><br><span class="line"><span class="regexp">      &lt;el-step title="填写课程基本信息"/</span>&gt;</span><br><span class="line">      &lt;el-step title=<span class="string">"创建课程大纲"</span>/&gt;</span><br><span class="line">      &lt;el-step title=<span class="string">"最终发布"</span>/&gt;</span><br><span class="line">    &lt;<span class="regexp">/el-steps&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    &lt;!-- 章节 --&gt;</span></span><br><span class="line"><span class="regexp">    &lt;ul class="chanpterList"&gt;</span></span><br><span class="line"><span class="regexp">        &lt;li</span></span><br><span class="line"><span class="regexp">            v-for="chapter in chapterVideoList"</span></span><br><span class="line"><span class="regexp">            :key="chapter.id"&gt;</span></span><br><span class="line"><span class="regexp">            &lt;p&gt;</span></span><br><span class="line"><span class="regexp">                &#123;&#123; chapter.title &#125;&#125;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>p&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!-- 视频 --&gt;</span><br><span class="line">            &lt;ul <span class="class"><span class="keyword">class</span></span>=<span class="string">"chanpterList videoList"</span>&gt;</span><br><span class="line">                &lt;li</span><br><span class="line">                    v-<span class="keyword">for</span>=<span class="string">"video in chapter.children"</span></span><br><span class="line">                    :key=<span class="string">"video.id"</span>&gt;</span><br><span class="line">                    &lt;p&gt;&#123;&#123; video.title &#125;&#125;</span><br><span class="line">                    &lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">                &lt;/</span>li&gt;</span><br><span class="line">            &lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>li&gt;</span><br><span class="line">    &lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">    &lt;div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;el-button @click="previous"&gt;上一步&lt;/</span>el-button&gt;</span><br><span class="line">        &lt;el-button :disabled=<span class="string">"saveBtnDisabled"</span> type=<span class="string">"primary"</span> @click=<span class="string">"next"</span>&gt;下一步&lt;<span class="regexp">/el-button&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> chapter <span class="keyword">from</span> <span class="string">'@/api/edu/chapter'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">        <span class="keyword">return</span>&#123;</span><br><span class="line">            saveBtnDisabled: <span class="literal">false</span>,</span><br><span class="line">            chapterVideoList: [],</span><br><span class="line">            courseId: <span class="string">""</span>,</span><br><span class="line">            chapter: &#123;</span><br><span class="line">              title: <span class="string">""</span></span><br><span class="line">            &#125;,</span><br><span class="line">            video: &#123;</span><br><span class="line">              title:<span class="string">""</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    created()&#123;</span><br><span class="line">      <span class="comment">//如果有id值则查询章节信息，没有就是添加章节信息</span></span><br><span class="line">      <span class="keyword">if</span>(<span class="keyword">this</span>.$route.params &amp;&amp; <span class="keyword">this</span>.$route.params.id)&#123;</span><br><span class="line">        <span class="keyword">this</span>.courseId = <span class="keyword">this</span>.$route.params.id</span><br><span class="line">        <span class="keyword">this</span>.getChaptersByCourseId()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//根据课程id查询章节列表信息</span></span><br><span class="line">      getChaptersByCourseId()&#123;</span><br><span class="line">        chapter.getChaptersByCourseId(<span class="keyword">this</span>.courseId)</span><br><span class="line">          .then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.chapterVideoList = response.data.chapterList</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//上一步点击事件</span></span><br><span class="line">      previous()&#123;</span><br><span class="line">          <span class="keyword">this</span>.$router.push(&#123;<span class="attr">path</span>:<span class="string">"/course/info"</span>&#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//下一步点击事件</span></span><br><span class="line">      next()&#123;</span><br><span class="line">          <span class="keyword">this</span>.$router.push(&#123;<span class="attr">path</span>: <span class="string">'/course/publish'</span>&#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;style scoped&gt;</span></span><br><span class="line"><span class="regexp">.chanpterList&#123;</span></span><br><span class="line"><span class="regexp">    position: relative;</span></span><br><span class="line"><span class="regexp">    list-style: none;</span></span><br><span class="line"><span class="regexp">    margin: 0;</span></span><br><span class="line"><span class="regexp">    padding: 0;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">.chanpterList li&#123;</span></span><br><span class="line"><span class="regexp">  position: relative;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">.chanpterList p&#123;</span></span><br><span class="line"><span class="regexp">  float: left;</span></span><br><span class="line"><span class="regexp">  font-size: 20px;</span></span><br><span class="line"><span class="regexp">  margin: 10px 0;</span></span><br><span class="line"><span class="regexp">  padding: 10px;</span></span><br><span class="line"><span class="regexp">  height: 70px;</span></span><br><span class="line"><span class="regexp">  line-height: 50px;</span></span><br><span class="line"><span class="regexp">  width: 100%;</span></span><br><span class="line"><span class="regexp">  border: 1px solid #DDD;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">.chanpterList .acts &#123;</span></span><br><span class="line"><span class="regexp">    float: right;</span></span><br><span class="line"><span class="regexp">    font-size: 14px;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">.videoList&#123;</span></span><br><span class="line"><span class="regexp">  padding-left: 50px;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">.videoList p&#123;</span></span><br><span class="line"><span class="regexp">  float: left;</span></span><br><span class="line"><span class="regexp">  font-size: 14px;</span></span><br><span class="line"><span class="regexp">  margin: 10px 0;</span></span><br><span class="line"><span class="regexp">  padding: 10px;</span></span><br><span class="line"><span class="regexp">  height: 50px;</span></span><br><span class="line"><span class="regexp">  line-height: 30px;</span></span><br><span class="line"><span class="regexp">  width: 100%;</span></span><br><span class="line"><span class="regexp">  border: 1px dotted #DDD;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;/</span>style&gt;</span><br></pre></td></tr></table></figure>

<p>小结：</p>
<ul>
<li>再次强调，从上一步的路由传过来的id只要使用this.courseId就可以取到</li>
</ul>
<h4 id="效果测试："><a href="#效果测试：" class="headerlink" title="效果测试："></a>效果测试：</h4><p><img src= "/img/loading.gif" data-src="https://my-pic-bed-01.oss-cn-shenzhen.aliyuncs.com/img/20200706203220.png" alt="image-20200706203220852"></p>
<h3 id="上一步接口完善"><a href="#上一步接口完善" class="headerlink" title="上一步接口完善"></a>上一步接口完善</h3><p>在发布新课程这一步中，点击上一步回到填写课程基本信息，这时候我们需要信息回显，所以需要完善这一部分的内容</p>
<h4 id="携带id"><a href="#携带id" class="headerlink" title="携带id"></a>携带id</h4><p>首先在前端点击上一步/下一步，都要携带当前的id进行路由跳转</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//上一步点击事件</span></span><br><span class="line">previous()&#123;</span><br><span class="line">    <span class="keyword">this</span>.$router.push(&#123;<span class="attr">path</span>:<span class="string">"/course/info/"</span> + <span class="keyword">this</span>.courseId&#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//下一步点击事件</span></span><br><span class="line">next()&#123;</span><br><span class="line">    <span class="keyword">this</span>.$router.push(&#123;<span class="attr">path</span>: <span class="string">'/course/publish/'</span> + <span class="keyword">this</span>.courseId&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="信息回显"><a href="#信息回显" class="headerlink" title="信息回显"></a>信息回显</h4><p>提示：信息回显需要重新获取课程基本信息，编辑后修改再进行下一步，所以这里需要再开发两个接口：</p>
<h5 id="编写service层-2"><a href="#编写service层-2" class="headerlink" title="编写service层"></a>编写service层</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据课程id查询课程信息</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> CourseInfoVo <span class="title">getCourseInfo</span><span class="params">(String courseId)</span> </span>&#123;</span><br><span class="line">    CourseInfoVo courseInfoVo = <span class="keyword">new</span> CourseInfoVo();</span><br><span class="line">    EduCourse eduCourse = baseMapper.selectById(courseId);</span><br><span class="line">    BeanUtils.copyProperties(eduCourse, courseInfoVo);</span><br><span class="line">    EduCourseDescription eduCourseDescription = eduCourseDescriptionService.getById(courseId);</span><br><span class="line">    BeanUtils.copyProperties(eduCourseDescription, courseInfoVo);</span><br><span class="line">    <span class="keyword">return</span> courseInfoVo;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//更新课程信息</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateCourseInfo</span><span class="params">(CourseInfoVo courseInfoVo)</span> </span>&#123;</span><br><span class="line">    EduCourse eduCourse = <span class="keyword">new</span> EduCourse();</span><br><span class="line">    BeanUtils.copyProperties(courseInfoVo, eduCourse);</span><br><span class="line">    <span class="keyword">int</span> update = baseMapper.updateById(eduCourse);</span><br><span class="line">    <span class="keyword">if</span>(update == <span class="number">0</span>)&#123;<span class="comment">//修改失败，抛出异常</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">"更改课程信息失败"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//修改成功则继续修改简介</span></span><br><span class="line">    EduCourseDescription eduCourseDescription = <span class="keyword">new</span> EduCourseDescription();</span><br><span class="line">    BeanUtils.copyProperties(courseInfoVo, eduCourseDescription);</span><br><span class="line">    eduCourseDescriptionService.updateById(eduCourseDescription);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="编写controller层-2"><a href="#编写controller层-2" class="headerlink" title="编写controller层"></a>编写controller层</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查询课程信息,别忘了查询的应该是CourseInfo的信息</span></span><br><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/getCourseInfo/&#123;courseId&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">getCourseInfo</span><span class="params">(@PathVariable String courseId)</span></span>&#123;</span><br><span class="line">    CourseInfoVo courseInfoVo = eduCourseService.getCourseInfo(courseId);</span><br><span class="line">    <span class="keyword">return</span> R.ok().data(<span class="string">"courseInfoVo"</span>, courseInfoVo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//更新课程基本信息</span></span><br><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"/updateCourseInfo"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">updateCourseInfo</span><span class="params">(@RequestBody CourseInfoVo courseInfoVo)</span></span>&#123;</span><br><span class="line">    eduCourseService.updateCourseInfo(courseInfoVo);</span><br><span class="line">    <span class="keyword">return</span> R.ok();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>前端info.vue页面完善</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"></span><br><span class="line">  &lt;div class&#x3D;&quot;app-container&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h2 style&#x3D;&quot;text-align: center;&quot;&gt;发布新课程&lt;&#x2F;h2&gt;</span><br><span class="line"></span><br><span class="line">    &lt;el-steps :active&#x3D;&quot;1&quot; process-status&#x3D;&quot;wait&quot; align-center style&#x3D;&quot;margin-bottom: 40px;&quot;&gt;</span><br><span class="line">      &lt;el-step title&#x3D;&quot;填写课程基本信息&quot;&#x2F;&gt;</span><br><span class="line">      &lt;el-step title&#x3D;&quot;创建课程大纲&quot;&#x2F;&gt;</span><br><span class="line">      &lt;el-step title&#x3D;&quot;最终发布&quot;&#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;el-steps&gt;</span><br><span class="line"></span><br><span class="line">    &lt;el-form label-width&#x3D;&quot;120px&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;el-form-item label&#x3D;&quot;课程标题&quot;&gt;</span><br><span class="line">            &lt;el-input v-model&#x3D;&quot;courseInfo.title&quot; placeholder&#x3D;&quot; 示例：机器学习项目课：从基础到搭建项目视频课程。专业名称注意大小写&quot;&#x2F;&gt;</span><br><span class="line">        &lt;&#x2F;el-form-item&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- 所属分类 TODO --&gt;</span><br><span class="line">        &lt;!-- 一级分类 --&gt;</span><br><span class="line">        &lt;el-form-item label&#x3D;&quot;课程分类&quot;&gt;</span><br><span class="line">            &lt;el-select</span><br><span class="line">                v-model&#x3D;&quot;courseInfo.subjectParentId&quot;</span><br><span class="line">                placeholder&#x3D;&quot;一级分类&quot; @change&#x3D;&quot;subjectLevelOneChanged&quot;&gt;</span><br><span class="line"></span><br><span class="line">                &lt;el-option</span><br><span class="line">                    v-for&#x3D;&quot;subject in subjectOneList&quot;</span><br><span class="line">                    :key&#x3D;&quot;subject.id&quot;</span><br><span class="line">                    :label&#x3D;&quot;subject.title&quot;</span><br><span class="line">                    :value&#x3D;&quot;subject.id&quot;&#x2F;&gt;</span><br><span class="line"></span><br><span class="line">            &lt;&#x2F;el-select&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!-- 二级分类 --&gt;</span><br><span class="line">            &lt;el-select v-model&#x3D;&quot;courseInfo.subjectId&quot; placeholder&#x3D;&quot;二级分类&quot;&gt;</span><br><span class="line">                &lt;el-option</span><br><span class="line">                    v-for&#x3D;&quot;subject in subjectTwoList&quot;</span><br><span class="line">                    :key&#x3D;&quot;subject.id&quot;</span><br><span class="line">                    :label&#x3D;&quot;subject.title&quot;</span><br><span class="line">                    :value&#x3D;&quot;subject.id&quot;&#x2F;&gt;</span><br><span class="line">            &lt;&#x2F;el-select&gt;</span><br><span class="line">        &lt;&#x2F;el-form-item&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- 课程讲师 TODO --&gt;</span><br><span class="line">        &lt;!-- 课程讲师 --&gt;</span><br><span class="line">        &lt;el-form-item label&#x3D;&quot;课程讲师&quot;&gt;</span><br><span class="line">            &lt;el-select</span><br><span class="line">                v-model&#x3D;&quot;courseInfo.teacherId&quot;</span><br><span class="line">                placeholder&#x3D;&quot;请选择&quot;&gt;</span><br><span class="line"></span><br><span class="line">                &lt;el-option</span><br><span class="line">                    v-for&#x3D;&quot;teacher in teacherList&quot;</span><br><span class="line">                    :key&#x3D;&quot;teacher.id&quot;</span><br><span class="line">                    :label&#x3D;&quot;teacher.name&quot;</span><br><span class="line">                    :value&#x3D;&quot;teacher.id&quot;&#x2F;&gt;</span><br><span class="line"></span><br><span class="line">            &lt;&#x2F;el-select&gt;</span><br><span class="line">        &lt;&#x2F;el-form-item&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &lt;el-form-item label&#x3D;&quot;总课时&quot;&gt;</span><br><span class="line">            &lt;el-input-number :min&#x3D;&quot;0&quot; v-model&#x3D;&quot;courseInfo.lessonNum&quot; controls-position&#x3D;&quot;right&quot; placeholder&#x3D;&quot;请填写课程的总课时数&quot;&#x2F;&gt;</span><br><span class="line">        &lt;&#x2F;el-form-item&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- 课程简介 TODO --&gt;</span><br><span class="line">        &lt;!-- 课程简介--&gt;</span><br><span class="line">        &lt;el-form-item label&#x3D;&quot;课程简介&quot;&gt;</span><br><span class="line">            &lt;tinymce :height&#x3D;&quot;300&quot; v-model&#x3D;&quot;courseInfo.description&quot;&#x2F;&gt;</span><br><span class="line">        &lt;&#x2F;el-form-item&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- 课程封面 TODO --&gt;</span><br><span class="line">        &lt;!-- 课程封面--&gt;</span><br><span class="line">        &lt;el-form-item label&#x3D;&quot;课程封面&quot;&gt;</span><br><span class="line"></span><br><span class="line">            &lt;el-upload</span><br><span class="line">                :show-file-list&#x3D;&quot;false&quot;</span><br><span class="line">                :on-success&#x3D;&quot;handleAvatarSuccess&quot;</span><br><span class="line">                :before-upload&#x3D;&quot;beforeAvatarUpload&quot;</span><br><span class="line">                :action&#x3D;&quot;BASE_API+&#39;&#x2F;eduoss&#x2F;fileupload&#39;&quot;</span><br><span class="line">                class&#x3D;&quot;avatar-uploader&quot;&gt;</span><br><span class="line">                &lt;img :src&#x3D;&quot;courseInfo.cover&quot;&gt;</span><br><span class="line">                &lt;p&gt;点击图片更换封面&lt;&#x2F;p&gt;</span><br><span class="line">            &lt;&#x2F;el-upload&gt;</span><br><span class="line"></span><br><span class="line">        &lt;&#x2F;el-form-item&gt;</span><br><span class="line"></span><br><span class="line">        &lt;el-form-item label&#x3D;&quot;课程价格&quot;&gt;</span><br><span class="line">            &lt;el-input-number :min&#x3D;&quot;0&quot; v-model&#x3D;&quot;courseInfo.price&quot; controls-position&#x3D;&quot;right&quot; placeholder&#x3D;&quot;免费课程请设置为0元&quot;&#x2F;&gt; 元</span><br><span class="line">        &lt;&#x2F;el-form-item&gt;</span><br><span class="line"></span><br><span class="line">        &lt;el-form-item&gt;</span><br><span class="line">            &lt;el-button :disabled&#x3D;&quot;saveBtnDisabled&quot; type&#x3D;&quot;primary&quot; @click&#x3D;&quot;saveOrUpdate&quot;&gt;保存并下一步&lt;&#x2F;el-button&gt;</span><br><span class="line">        &lt;&#x2F;el-form-item&gt;</span><br><span class="line">        &lt;&#x2F;el-form&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import course from &#39;@&#x2F;api&#x2F;edu&#x2F;course&#39;</span><br><span class="line">import subject from &#39;@&#x2F;api&#x2F;edu&#x2F;subject&#39;</span><br><span class="line">&#x2F;&#x2F;导入富文本编辑器组件</span><br><span class="line">import Tinymce from &#39;@&#x2F;components&#x2F;Tinymce&#39;</span><br><span class="line">export default &#123;</span><br><span class="line">    &#x2F;&#x2F;声明组件</span><br><span class="line">    components: &#123;Tinymce&#125;,</span><br><span class="line">    data()&#123;</span><br><span class="line">        return&#123;</span><br><span class="line">            courseInfo: &#123;</span><br><span class="line">                title: &#39;&#39;,</span><br><span class="line">                subjectId: &#39;&#39;,&#x2F;&#x2F;二级分类id</span><br><span class="line">                subjectParentId:&#39;&#39;,&#x2F;&#x2F;一级分类id</span><br><span class="line">                teacherId: &#39;&#39;,</span><br><span class="line">                lessonNum: 0,</span><br><span class="line">                description: &#39;&#39;,</span><br><span class="line">                cover: &#39;&#x2F;static&#x2F;add.jpg&#39;,</span><br><span class="line">                price: 0</span><br><span class="line">            &#125;,</span><br><span class="line">            courseId: &quot;&quot;,</span><br><span class="line">            subjectOneList: [],&#x2F;&#x2F;一级分类列表</span><br><span class="line">            subjectTwoList: [],&#x2F;&#x2F;二级分类列表</span><br><span class="line">            teacherList: [],&#x2F;&#x2F;所属讲师列表</span><br><span class="line">            BASE_API: process.env.BASE_API, &#x2F;&#x2F; 接口API地址</span><br><span class="line">            saveBtnDisabled: false</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    created()&#123;</span><br><span class="line">        this.init()</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        &#x2F;&#x2F;数据回显&#x2F;初始化课程基本信息</span><br><span class="line">        init()&#123;</span><br><span class="line">            &#x2F;&#x2F;如果当前页面有携带id，则是更新课程基本信息，需要信息回显</span><br><span class="line">            if(this.$route.params &amp;&amp; this.$route.params.id)&#123;</span><br><span class="line">                this.courseId &#x3D; this.$route.params.id</span><br><span class="line">                this.getCourseInfo()</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                &#x2F;&#x2F;初始化讲师列表</span><br><span class="line">                this.findAllTeacher()</span><br><span class="line">                &#x2F;&#x2F;初始化一级分类列表</span><br><span class="line">                this.getOneSubject()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#x2F;&#x2F;获取课程基本信息方法</span><br><span class="line">        getCourseInfo()&#123;</span><br><span class="line">            course.getCourseInfo(this.courseId)</span><br><span class="line">                .then(response &#x3D;&gt; &#123;</span><br><span class="line">                    this.courseInfo &#x3D; response.data.courseInfoVo</span><br><span class="line">                    &#x2F;&#x2F;chapte返回上一步数据回显时会产生一个bug，就是二级分类中没有数据,导致显示的是id</span><br><span class="line">                    &#x2F;&#x2F;所以我们要使二级分类有数据,就要查询</span><br><span class="line">                    subject.getAllSubject()</span><br><span class="line">                        .then(response &#x3D;&gt; &#123;</span><br><span class="line">                            this.subjectOneList &#x3D; response.data.list</span><br><span class="line">                            &#x2F;&#x2F;把所有的以及分类数据进行遍历</span><br><span class="line">                            for(var i &#x3D; 0; i &lt; this.subjectOneList.length; i++)&#123;</span><br><span class="line">                                var oneSubject &#x3D; this.subjectOneList[i]</span><br><span class="line">                                &#x2F;&#x2F;比较当前courseInfo里面的以及分类id和所有的以及分类id</span><br><span class="line">                                if(this.courseInfo.subjectParentId &#x3D;&#x3D; oneSubject.id)&#123;</span><br><span class="line">                                    &#x2F;&#x2F;获取一级分类所有的二级分类</span><br><span class="line">                                    this.subjectTwoList &#x3D; oneSubject.children</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;)</span><br><span class="line">                        &#x2F;&#x2F;讲师列表也一样，需要初始化，不然没数据只会显示id</span><br><span class="line">                        this.findAllTeacher()</span><br><span class="line">                &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        &#x2F;&#x2F;更新课程基本信息方法,并下一步</span><br><span class="line">        updateCourseInfo()&#123;</span><br><span class="line">            course.updateCourseInfo(this.courseInfo)</span><br><span class="line">                .then(response &#x3D;&gt; &#123;</span><br><span class="line">                    &#x2F;&#x2F;提示</span><br><span class="line">                    this.$message(&#123;</span><br><span class="line">                        type: &#39;success&#39;,</span><br><span class="line">                        message: &#39;修改课程信息成功!&#39;</span><br><span class="line">                    &#125;);</span><br><span class="line">                    &#x2F;&#x2F;跳转到第二步,注意需要携带id</span><br><span class="line">                    this.$router.push(&#123;path: &#39;&#x2F;course&#x2F;chapter&#x2F;&#39; + this.courseId&#125;)</span><br><span class="line">                &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        &#x2F;&#x2F;上传封面成功后调用的方法</span><br><span class="line">        handleAvatarSuccess(res, file)&#123;</span><br><span class="line">            this.courseInfo.cover &#x3D; res.data.url</span><br><span class="line">        &#125;,</span><br><span class="line">        &#x2F;&#x2F;上传封面之前调用的方法，一般用来定义上传文件的类型、大小等</span><br><span class="line">        beforeAvatarUpload(file)&#123;</span><br><span class="line">            const isJPG &#x3D; file.type &#x3D;&#x3D;&#x3D; &#39;image&#x2F;jpeg&#39;</span><br><span class="line">            const isLt2M &#x3D; file.size &#x2F; 1024 &#x2F; 1024 &lt; 2</span><br><span class="line"></span><br><span class="line">            if (!isJPG) &#123;</span><br><span class="line">                this.$message.error(&#39;上传头像图片只能是 JPG 格式!&#39;)</span><br><span class="line">            &#125;</span><br><span class="line">            if (!isLt2M) &#123;</span><br><span class="line">                this.$message.error(&#39;上传头像图片大小不能超过 2MB!&#39;)</span><br><span class="line">            &#125;</span><br><span class="line">            return isJPG &amp;&amp; isLt2M</span><br><span class="line">        &#125;,</span><br><span class="line">        &#x2F;&#x2F;选好一级分类之后，查询二级分类的信息，属于二级联动的效果（一级没选的话二级是不会有数据的）</span><br><span class="line">        subjectLevelOneChanged(value)&#123;&#x2F;&#x2F;value就是一级分类id值</span><br><span class="line">            &#x2F;&#x2F;遍历所有的一级分类</span><br><span class="line">            for(var i &#x3D; 0; i &lt;&#x3D; this.subjectOneList.length; i++)&#123;</span><br><span class="line">                &#x2F;&#x2F;获取每一个一级分类</span><br><span class="line">                var oneSubject &#x3D; this.subjectOneList[i]</span><br><span class="line">                &#x2F;&#x2F;判断id是否相等</span><br><span class="line">                if(value &#x3D;&#x3D;&#x3D; oneSubject.id)&#123;</span><br><span class="line">                    &#x2F;&#x2F;如果相等则赋值</span><br><span class="line">                    this.subjectTwoList &#x3D; oneSubject.children</span><br><span class="line">                    &#x2F;&#x2F;注意，每当二级分类选好了之后，又想改一级分类，需要将选好的二级分类的值清空</span><br><span class="line">                    this.courseInfo.subjectId &#x3D; &quot;&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#x2F;&#x2F;获取一级分类方法</span><br><span class="line">        getOneSubject()&#123;</span><br><span class="line">            subject.getAllSubject()</span><br><span class="line">                .then(response &#x3D;&gt; &#123;</span><br><span class="line">                    this.subjectOneList &#x3D; response.data.list</span><br><span class="line">                &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        &#x2F;&#x2F;查询所有讲师方法</span><br><span class="line">        findAllTeacher()&#123;</span><br><span class="line">            course.findAllTeacher()</span><br><span class="line">                .then(response &#x3D;&gt; &#123;</span><br><span class="line">                    this.teacherList &#x3D; response.data.items</span><br><span class="line">                &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        addCourse()&#123;</span><br><span class="line">            course.addCourseInfo(this.courseInfo)</span><br><span class="line">                .then(response &#x3D;&gt; &#123;</span><br><span class="line">                    &#x2F;&#x2F;提示信息</span><br><span class="line">                    this.$message(&#123;</span><br><span class="line">                    type: &#39;success&#39;,</span><br><span class="line">                    message: &#39;添加课程基本信息成功!&#39;</span><br><span class="line">                    &#125;);</span><br><span class="line">                    this.$router.push(&#123;path: &#39;&#x2F;course&#x2F;chapter&#x2F;&#39; + response.data.id&#125;)</span><br><span class="line">                &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        &#x2F;&#x2F;保存并下一步，这里分离两个方法再调用即可</span><br><span class="line">        saveOrUpdate()&#123;</span><br><span class="line">            &#x2F;&#x2F;判断是添加还是修改</span><br><span class="line">            if(!this.courseInfo.id)&#123;</span><br><span class="line">                &#x2F;&#x2F;添加</span><br><span class="line">                this.addCourse()</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                this.updateCourseInfo()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.tinymce-container &#123;</span><br><span class="line">  line-height: 29px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<p>注意以下几个问题(其实跟teacher的save界面相似)</p>
<ul>
<li>携带id的问题</li>
<li>数据回显的问题</li>
<li>数据回显后再点击添加课程的问题(<code>todo</code>)</li>
</ul>
<p>还有如果遇到403错误，一般都是这两个错误：</p>
<ul>
<li>跨域问题</li>
<li>路径写错了</li>
</ul>
<h3 id="章节列表的crud"><a href="#章节列表的crud" class="headerlink" title="章节列表的crud"></a>章节列表的crud</h3><h4 id="后端代码"><a href="#后端代码" class="headerlink" title="后端代码"></a>后端代码</h4><h5 id="service层接口"><a href="#service层接口" class="headerlink" title="service层接口"></a>service层接口</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">deleteChapter</span><span class="params">(String chapterId)</span></span>;</span><br></pre></td></tr></table></figure>

<h5 id="service层实现类"><a href="#service层实现类" class="headerlink" title="service层实现类"></a>service层实现类</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">deleteChapter</span><span class="params">(String chapterId)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//判断是否有小结信息，在决定是否删除操作</span></span><br><span class="line">    <span class="comment">//video中也一样有chapterId，所有根据chapterId也可以查出小节信息</span></span><br><span class="line">    QueryWrapper&lt;EduVideo&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    wrapper.eq(<span class="string">"chapter_id"</span>, chapterId);</span><br><span class="line">    <span class="comment">//因为查询数据列表没什么用，所以我们可以计数</span></span><br><span class="line">    <span class="keyword">int</span> count = eduVideoService.count(wrapper);</span><br><span class="line">    <span class="keyword">if</span>(count &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>,<span class="string">"操作失败，请先删除小节"</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">int</span> result = baseMapper.deleteById(chapterId);</span><br><span class="line">        <span class="keyword">return</span> result &gt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="controller层"><a href="#controller层" class="headerlink" title="controller层"></a>controller层</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加章节</span></span><br><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"/addChapter"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">addChapter</span><span class="params">(@RequestBody EduChapter eduChapter)</span></span>&#123;</span><br><span class="line">    eduChapterService.save(eduChapter);</span><br><span class="line">    <span class="keyword">return</span> R.ok();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//根据章节id查询</span></span><br><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/getChapter/&#123;chapterId&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">getChapter</span><span class="params">(@PathVariable String chapterId)</span></span>&#123;</span><br><span class="line">    EduChapter chapter = eduChapterService.getById(chapterId);</span><br><span class="line">    <span class="keyword">return</span> R.ok().data(<span class="string">"chapter"</span>,chapter);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//修改章节</span></span><br><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"/updateChapter"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">updateChapter</span><span class="params">(@RequestBody EduChapter eduChapter)</span></span>&#123;</span><br><span class="line">    eduChapterService.updateById(eduChapter);</span><br><span class="line">    <span class="keyword">return</span> R.ok();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//删除章节信息</span></span><br><span class="line"><span class="comment">//思路=&gt;如果章节中还有小节信息，则不进行删除操作，只有没有小节信息才进行删除操作</span></span><br><span class="line"><span class="meta">@DeleteMapping</span>(<span class="string">"/deleteChapter/&#123;chapterId&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">updateChapter</span><span class="params">(@PathVariable String chapterId)</span></span>&#123;</span><br><span class="line">    <span class="keyword">boolean</span> flag = eduChapterService.deleteChapter(chapterId);</span><br><span class="line">    <span class="comment">//如果flag为true则不删除</span></span><br><span class="line">    <span class="keyword">if</span>(flag)&#123;</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> R.error();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="sawagger自测"><a href="#sawagger自测" class="headerlink" title="sawagger自测"></a>sawagger自测</h5><p>略</p>
<h4 id="前端代码"><a href="#前端代码" class="headerlink" title="前端代码"></a>前端代码</h4><h5 id="api"><a href="#api" class="headerlink" title="api"></a>api</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加课程章信息</span></span><br><span class="line">addChapter(eduChapter)&#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">'/eduservice/edu-chapter/addChapter'</span>,</span><br><span class="line">        method: <span class="string">'post'</span>,</span><br><span class="line">        data: eduChapter</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//根据id查询</span></span><br><span class="line">getChapter(chapterId)&#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">'/eduservice/edu-chapter/getChapter/'</span> + chapterId,</span><br><span class="line">        method: <span class="string">'get'</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//更新</span></span><br><span class="line">updateChapter(eduChapter)&#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">'/eduservice/edu-chapter/updateChapter'</span>,</span><br><span class="line">        method: <span class="string">'post'</span>,</span><br><span class="line">        data: eduChapter</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//删除</span></span><br><span class="line">deleteChapter(chapterId)&#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">'/eduservice/edu-chapter/deleteChapter/'</span> + chapterId,</span><br><span class="line">        method: <span class="string">'delete'</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="chapter-vue"><a href="#chapter-vue" class="headerlink" title="chapter.vue"></a>chapter.vue</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"></span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"app-container"</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h2 style=<span class="string">"text-align: center;"</span>&gt;发布新课程&lt;<span class="regexp">/h2&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    &lt;el-steps :active="2" process-status="wait" align-center style="margin-bottom: 40px;"&gt;</span></span><br><span class="line"><span class="regexp">      &lt;el-step title="填写课程基本信息"/</span>&gt;</span><br><span class="line">      &lt;el-step title=<span class="string">"创建课程大纲"</span>/&gt;</span><br><span class="line">      &lt;el-step title=<span class="string">"最终发布"</span>/&gt;</span><br><span class="line">    &lt;<span class="regexp">/el-steps&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    &lt;el-button type="text" @click="openChapterDialog()"&gt;添加章节&lt;/</span>el-button&gt;</span><br><span class="line">    &lt;!-- 添加和修改章节表单 --&gt;</span><br><span class="line">    &lt;el-dialog :visible.sync=<span class="string">"dialogChapterFormVisible"</span> title=<span class="string">"添加章节"</span>&gt;</span><br><span class="line">        &lt;el-form :model=<span class="string">"chapter"</span> label-width=<span class="string">"120px"</span>&gt;</span><br><span class="line">            &lt;el-form-item label=<span class="string">"章节标题"</span>&gt;</span><br><span class="line">                &lt;el-input v-model=<span class="string">"chapter.title"</span>/&gt;</span><br><span class="line">            &lt;<span class="regexp">/el-form-item&gt;</span></span><br><span class="line"><span class="regexp">            &lt;el-form-item label="章节排序"&gt;</span></span><br><span class="line"><span class="regexp">                &lt;el-input-number v-model="chapter.sort" :min="0" controls-position="right"/</span>&gt;</span><br><span class="line">            &lt;<span class="regexp">/el-form-item&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>el-form&gt;</span><br><span class="line">        &lt;div slot=<span class="string">"footer"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"dialog-footer"</span>&gt;</span><br><span class="line">            &lt;el-button @click=<span class="string">"dialogChapterFormVisible = false"</span>&gt;取 消&lt;<span class="regexp">/el-button&gt;</span></span><br><span class="line"><span class="regexp">            &lt;el-button type="primary" @click="saveOrUpdate"&gt;确 定&lt;/</span>el-button&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>el-dialog&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 章节 --&gt;</span><br><span class="line">    &lt;ul <span class="class"><span class="keyword">class</span></span>=<span class="string">"chanpterList"</span>&gt;</span><br><span class="line">        &lt;li</span><br><span class="line">            v-<span class="keyword">for</span>=<span class="string">"chapter in chapterVideoList"</span></span><br><span class="line">            :key=<span class="string">"chapter.id"</span>&gt;</span><br><span class="line">            &lt;p&gt;</span><br><span class="line">                &#123;&#123; chapter.title &#125;&#125;</span><br><span class="line"></span><br><span class="line">                &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">"acts"</span>&gt;</span><br><span class="line">                    &lt;el-button style=<span class="string">""</span> type=<span class="string">"text"</span> @click=<span class="string">"openVideo(chapter.id)"</span>&gt;添加小节&lt;<span class="regexp">/el-button&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;el-button style="" type="text" @click="openEditChatper(chapter.id)"&gt;编辑&lt;/</span>el-button&gt;</span><br><span class="line">                    &lt;el-button type=<span class="string">"text"</span> @click=<span class="string">"removeChapter(chapter.id)"</span>&gt;删除&lt;<span class="regexp">/el-button&gt;</span></span><br><span class="line"><span class="regexp">                &lt;/</span>span&gt;</span><br><span class="line">            &lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">            &lt;!-- 视频 --&gt;</span></span><br><span class="line"><span class="regexp">            &lt;ul class="chanpterList videoList"&gt;</span></span><br><span class="line"><span class="regexp">                &lt;li</span></span><br><span class="line"><span class="regexp">                    v-for="video in chapter.children"</span></span><br><span class="line"><span class="regexp">                    :key="video.id"&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;p&gt;&#123;&#123; video.title &#125;&#125;</span></span><br><span class="line"><span class="regexp">                    &lt;/</span>p&gt;</span><br><span class="line">                &lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/u</span>l&gt;</span><br><span class="line">        &lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/u</span>l&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;el-button @click=<span class="string">"previous"</span>&gt;上一步&lt;<span class="regexp">/el-button&gt;</span></span><br><span class="line"><span class="regexp">        &lt;el-button :disabled="saveBtnDisabled" type="primary" @click="next"&gt;下一步&lt;/</span>el-button&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">import chapter from '@/</span>api/edu/chapter<span class="string">'</span></span><br><span class="line"><span class="string">export default &#123;</span></span><br><span class="line"><span class="string">    data()&#123;</span></span><br><span class="line"><span class="string">        return&#123;</span></span><br><span class="line"><span class="string">            saveBtnDisabled: false,</span></span><br><span class="line"><span class="string">            chapterVideoList: [],</span></span><br><span class="line"><span class="string">            courseId: "",</span></span><br><span class="line"><span class="string">            chapter: &#123;</span></span><br><span class="line"><span class="string">              title: "",</span></span><br><span class="line"><span class="string">              sort: ""</span></span><br><span class="line"><span class="string">            &#125;,</span></span><br><span class="line"><span class="string">            video: &#123;</span></span><br><span class="line"><span class="string">              title:""</span></span><br><span class="line"><span class="string">            &#125;,</span></span><br><span class="line"><span class="string">            dialogChapterFormVisible: false</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    created()&#123;</span></span><br><span class="line"><span class="string">      //如果有id值则查询章节信息，没有就是添加章节信息</span></span><br><span class="line"><span class="string">      if(this.$route.params &amp;&amp; this.$route.params.id)&#123;</span></span><br><span class="line"><span class="string">        this.courseId = this.$route.params.id</span></span><br><span class="line"><span class="string">        this.getChaptersByCourseId()</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    methods: &#123;</span></span><br><span class="line"><span class="string">//================================小节crud对应的方法=========================================</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//================================章节crud对应的方法=======================================</span></span><br><span class="line"><span class="string">      //点击编辑弹框并数据回显</span></span><br><span class="line"><span class="string">      openEditChatper(chapterId)&#123;</span></span><br><span class="line"><span class="string">        this.dialogChapterFormVisible = true</span></span><br><span class="line"><span class="string">        chapter.getChapter(chapterId)</span></span><br><span class="line"><span class="string">          .then(response =&gt; &#123;</span></span><br><span class="line"><span class="string">            this.chapter = response.data.chapter</span></span><br><span class="line"><span class="string">          &#125;)</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      //删除章节信息</span></span><br><span class="line"><span class="string">      removeChapter(chapterId)&#123;</span></span><br><span class="line"><span class="string">        //弹框提示</span></span><br><span class="line"><span class="string">        //为了用户体验，应该弹框提醒</span></span><br><span class="line"><span class="string">        this.$confirm('</span>确定需要删除此章节记录吗？<span class="string">', '</span>提示<span class="string">', &#123;</span></span><br><span class="line"><span class="string">            confirmButtonText: '</span>确定<span class="string">',</span></span><br><span class="line"><span class="string">            cancelButtonText: '</span>取消<span class="string">',</span></span><br><span class="line"><span class="string">            type: '</span>warning<span class="string">'</span></span><br><span class="line"><span class="string">          &#125;).then(() =&gt; &#123;//点击确定执行</span></span><br><span class="line"><span class="string">            chapter.deleteChapter(chapterId)</span></span><br><span class="line"><span class="string">              .then(response =&gt; &#123;</span></span><br><span class="line"><span class="string">                this.$message(&#123;//删除成功后弹框</span></span><br><span class="line"><span class="string">                  type: '</span>success<span class="string">',</span></span><br><span class="line"><span class="string">                  message: '</span>删除章节成功!<span class="string">'</span></span><br><span class="line"><span class="string">                &#125;);</span></span><br><span class="line"><span class="string">                //删除成功后需要重新查询所有</span></span><br><span class="line"><span class="string">                this.getChaptersByCourseId()</span></span><br><span class="line"><span class="string">              &#125;)</span></span><br><span class="line"><span class="string">          &#125;)</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      //添加章节方法</span></span><br><span class="line"><span class="string">      addChapter()&#123;</span></span><br><span class="line"><span class="string">        //设置当前所属课程id</span></span><br><span class="line"><span class="string">        this.chapter.courseId = this.courseId</span></span><br><span class="line"><span class="string">        chapter.addChapter(this.chapter)</span></span><br><span class="line"><span class="string">          .then(response =&gt; &#123;</span></span><br><span class="line"><span class="string">            //关闭弹框</span></span><br><span class="line"><span class="string">            this.dialogChapterFormVisible = false</span></span><br><span class="line"><span class="string">            //提示信息</span></span><br><span class="line"><span class="string">            this.$message(&#123;</span></span><br><span class="line"><span class="string">              type: '</span>success<span class="string">',</span></span><br><span class="line"><span class="string">              message: '</span>添加成功!<span class="string">'</span></span><br><span class="line"><span class="string">            &#125;);</span></span><br><span class="line"><span class="string">            //刷新页面</span></span><br><span class="line"><span class="string">            this.getChaptersByCourseId()</span></span><br><span class="line"><span class="string">          &#125;)</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      //修改章节方法</span></span><br><span class="line"><span class="string">      updateChapter()&#123;</span></span><br><span class="line"><span class="string">        chapter.updateChapter(this.chapter)</span></span><br><span class="line"><span class="string">          .then(response =&gt; &#123;</span></span><br><span class="line"><span class="string">            //关弹框，提示信息，刷新页面</span></span><br><span class="line"><span class="string">            //关闭弹框</span></span><br><span class="line"><span class="string">            this.dialogChapterFormVisible = false</span></span><br><span class="line"><span class="string">            //提示</span></span><br><span class="line"><span class="string">            this.$message(&#123;</span></span><br><span class="line"><span class="string">                type: '</span>success<span class="string">',</span></span><br><span class="line"><span class="string">                message: '</span>修改章节成功!<span class="string">'</span></span><br><span class="line"><span class="string">            &#125;);</span></span><br><span class="line"><span class="string">            //刷新页面</span></span><br><span class="line"><span class="string">            this.getChaptersByCourseId()</span></span><br><span class="line"><span class="string">          &#125;)</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      //打开弹框</span></span><br><span class="line"><span class="string">      openChapterDialog()&#123;</span></span><br><span class="line"><span class="string">        this.dialogChapterFormVisible = true</span></span><br><span class="line"><span class="string">        //因为第二次打开添加章节的时候，会显示上一次添加的章节信息，所以每次点击添加章节的时候应该初始化一下</span></span><br><span class="line"><span class="string">        this.chapter.title = ""</span></span><br><span class="line"><span class="string">        this.chapter.sort = 0</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      </span></span><br><span class="line"><span class="string">      //根据课程id查询章节列表信息</span></span><br><span class="line"><span class="string">      getChaptersByCourseId()&#123;</span></span><br><span class="line"><span class="string">        chapter.getChaptersByCourseId(this.courseId)</span></span><br><span class="line"><span class="string">          .then(response =&gt; &#123;</span></span><br><span class="line"><span class="string">            this.chapterVideoList = response.data.chapterList</span></span><br><span class="line"><span class="string">          &#125;)</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      //上一步点击事件</span></span><br><span class="line"><span class="string">      previous()&#123;</span></span><br><span class="line"><span class="string">          this.$router.push(&#123;path:"/course/info/" + this.courseId&#125;)</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      //下一步点击事件</span></span><br><span class="line"><span class="string">      next()&#123;</span></span><br><span class="line"><span class="string">          this.$router.push(&#123;path: '</span>/course/publish/<span class="string">' + this.courseId&#125;)</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      saveOrUpdate()&#123;</span></span><br><span class="line"><span class="string">        //判断是否携带章节id</span></span><br><span class="line"><span class="string">        if(!this.chapter.id)&#123;</span></span><br><span class="line"><span class="string">          this.addChapter()</span></span><br><span class="line"><span class="string">        &#125;else&#123;</span></span><br><span class="line"><span class="string">          this.updateChapter()</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;style scoped&gt;</span></span><br><span class="line"><span class="string">.chanpterList&#123;</span></span><br><span class="line"><span class="string">    position: relative;</span></span><br><span class="line"><span class="string">    list-style: none;</span></span><br><span class="line"><span class="string">    margin: 0;</span></span><br><span class="line"><span class="string">    padding: 0;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">.chanpterList li&#123;</span></span><br><span class="line"><span class="string">  position: relative;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">.chanpterList p&#123;</span></span><br><span class="line"><span class="string">  float: left;</span></span><br><span class="line"><span class="string">  font-size: 20px;</span></span><br><span class="line"><span class="string">  margin: 10px 0;</span></span><br><span class="line"><span class="string">  padding: 10px;</span></span><br><span class="line"><span class="string">  height: 70px;</span></span><br><span class="line"><span class="string">  line-height: 50px;</span></span><br><span class="line"><span class="string">  width: 100%;</span></span><br><span class="line"><span class="string">  border: 1px solid #DDD;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">.chanpterList .acts &#123;</span></span><br><span class="line"><span class="string">    float: right;</span></span><br><span class="line"><span class="string">    font-size: 14px;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">.videoList&#123;</span></span><br><span class="line"><span class="string">  padding-left: 50px;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">.videoList p&#123;</span></span><br><span class="line"><span class="string">  float: left;</span></span><br><span class="line"><span class="string">  font-size: 14px;</span></span><br><span class="line"><span class="string">  margin: 10px 0;</span></span><br><span class="line"><span class="string">  padding: 10px;</span></span><br><span class="line"><span class="string">  height: 50px;</span></span><br><span class="line"><span class="string">  line-height: 30px;</span></span><br><span class="line"><span class="string">  width: 100%;</span></span><br><span class="line"><span class="string">  border: 1px dotted #DDD;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;/style&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="小节列表的crud"><a href="#小节列表的crud" class="headerlink" title="小节列表的crud"></a>小节列表的crud</h3><h4 id="后端代码-1"><a href="#后端代码-1" class="headerlink" title="后端代码"></a>后端代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/eduservice/edu-video"</span>)</span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduVideoController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    EduVideoService eduVideoService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//添加小节</span></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"/addVideo"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">addVideo</span><span class="params">(@RequestBody EduVideo eduVideo)</span></span>&#123;</span><br><span class="line">        eduVideoService.save(eduVideo);</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//删除小节</span></span><br><span class="line">    <span class="meta">@DeleteMapping</span>(<span class="string">"/deleteVideo/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">deleteVideo</span><span class="params">(@PathVariable String id)</span></span>&#123;</span><br><span class="line">        eduVideoService.removeById(id);</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//修改小节</span></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"/updateVideo"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">updateVideo</span><span class="params">(@RequestBody EduVideo eduVideo)</span></span>&#123;</span><br><span class="line">        eduVideoService.updateById(eduVideo);</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//根据id查询小节</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/getVideo/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">getVideo</span><span class="params">(@PathVariable String id)</span></span>&#123;</span><br><span class="line">        EduVideo eduVideo = eduVideoService.getById(id);</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">"eduVideo"</span>,eduVideo);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="前端代码-1"><a href="#前端代码-1" class="headerlink" title="前端代码"></a>前端代码</h4><h5 id="api-1"><a href="#api-1" class="headerlink" title="api"></a>api</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">'@/utils/request'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">//添加小节</span></span><br><span class="line">    addVideo(eduVideo)&#123;</span><br><span class="line">        <span class="keyword">return</span> request(&#123;</span><br><span class="line">            url: <span class="string">'/eduservice/edu-video/addVideo'</span>,</span><br><span class="line">            method: <span class="string">'post'</span>,</span><br><span class="line">            data: eduVideo</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//删除小节</span></span><br><span class="line">    deleteVideo(id)&#123;</span><br><span class="line">        <span class="keyword">return</span> request(&#123;</span><br><span class="line">            url: <span class="string">'/eduservice/edu-video/deleteVideo/'</span> + id,</span><br><span class="line">            method: <span class="string">'delete'</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//修改小节</span></span><br><span class="line">    updateVideo(eduVideo)&#123;</span><br><span class="line">        <span class="keyword">return</span> request(&#123;</span><br><span class="line">            url: <span class="string">'/eduservice/edu-video/updateVideo'</span>,</span><br><span class="line">            method: <span class="string">'post'</span>,</span><br><span class="line">            data: eduVideo</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//根据id查询小节</span></span><br><span class="line">    getVideo(id)&#123;</span><br><span class="line">        <span class="keyword">return</span> request(&#123;</span><br><span class="line">            url: <span class="string">'/eduservice/edu-video/getVideo/'</span> + id,</span><br><span class="line">            method: <span class="string">'get'</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="chapter-vue-1"><a href="#chapter-vue-1" class="headerlink" title="chapter.vue"></a>chapter.vue</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"></span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"app-container"</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h2 style=<span class="string">"text-align: center;"</span>&gt;发布新课程&lt;<span class="regexp">/h2&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    &lt;el-steps :active="2" process-status="wait" align-center style="margin-bottom: 40px;"&gt;</span></span><br><span class="line"><span class="regexp">      &lt;el-step title="填写课程基本信息"/</span>&gt;</span><br><span class="line">      &lt;el-step title=<span class="string">"创建课程大纲"</span>/&gt;</span><br><span class="line">      &lt;el-step title=<span class="string">"最终发布"</span>/&gt;</span><br><span class="line">    &lt;<span class="regexp">/el-steps&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    &lt;el-button type="text" @click="openChapterDialog()"&gt;添加章节&lt;/</span>el-button&gt;</span><br><span class="line">    &lt;!-- 添加和修改章节表单 --&gt;</span><br><span class="line">    &lt;el-dialog :visible.sync=<span class="string">"dialogChapterFormVisible"</span> title=<span class="string">"添加章节"</span>&gt;</span><br><span class="line">        &lt;el-form :model=<span class="string">"chapter"</span> label-width=<span class="string">"120px"</span>&gt;</span><br><span class="line">            &lt;el-form-item label=<span class="string">"章节标题"</span>&gt;</span><br><span class="line">                &lt;el-input v-model=<span class="string">"chapter.title"</span>/&gt;</span><br><span class="line">            &lt;<span class="regexp">/el-form-item&gt;</span></span><br><span class="line"><span class="regexp">            &lt;el-form-item label="章节排序"&gt;</span></span><br><span class="line"><span class="regexp">                &lt;el-input-number v-model="chapter.sort" :min="0" controls-position="right"/</span>&gt;</span><br><span class="line">            &lt;<span class="regexp">/el-form-item&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>el-form&gt;</span><br><span class="line">        &lt;div slot=<span class="string">"footer"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"dialog-footer"</span>&gt;</span><br><span class="line">            &lt;el-button @click=<span class="string">"dialogChapterFormVisible = false"</span>&gt;取 消&lt;<span class="regexp">/el-button&gt;</span></span><br><span class="line"><span class="regexp">            &lt;el-button type="primary" @click="saveOrUpdate"&gt;确 定&lt;/</span>el-button&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>el-dialog&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 添加和修改课时表单 --&gt;</span><br><span class="line">    &lt;el-dialog :visible.sync=<span class="string">"dialogVideoFormVisible"</span> title=<span class="string">"添加课时"</span>&gt;</span><br><span class="line">      &lt;el-form :model=<span class="string">"video"</span> label-width=<span class="string">"120px"</span>&gt;</span><br><span class="line">        &lt;el-form-item label=<span class="string">"课时标题"</span>&gt;</span><br><span class="line">          &lt;el-input v-model=<span class="string">"video.title"</span>/&gt;</span><br><span class="line">        &lt;<span class="regexp">/el-form-item&gt;</span></span><br><span class="line"><span class="regexp">        &lt;el-form-item label="课时排序"&gt;</span></span><br><span class="line"><span class="regexp">          &lt;el-input-number v-model="video.sort" :min="0" controls-position="right"/</span>&gt;</span><br><span class="line">        &lt;<span class="regexp">/el-form-item&gt;</span></span><br><span class="line"><span class="regexp">        &lt;el-form-item label="是否免费"&gt;</span></span><br><span class="line"><span class="regexp">          &lt;el-radio-group v-model="video.free"&gt;</span></span><br><span class="line"><span class="regexp">            &lt;el-radio :label="true"&gt;免费&lt;/</span>el-radio&gt;</span><br><span class="line">            &lt;el-radio :label=<span class="string">"false"</span>&gt;默认&lt;<span class="regexp">/el-radio&gt;</span></span><br><span class="line"><span class="regexp">          &lt;/</span>el-radio-group&gt;</span><br><span class="line">        &lt;<span class="regexp">/el-form-item&gt;</span></span><br><span class="line"><span class="regexp">        &lt;el-form-item label="上传视频"&gt;</span></span><br><span class="line"><span class="regexp">          &lt;!-- TODO --&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>el-form-item&gt;</span><br><span class="line">      &lt;<span class="regexp">/el-form&gt;</span></span><br><span class="line"><span class="regexp">      &lt;div slot="footer" class="dialog-footer"&gt;</span></span><br><span class="line"><span class="regexp">        &lt;el-button @click="dialogVideoFormVisible = false"&gt;取 消&lt;/</span>el-button&gt;</span><br><span class="line">        &lt;el-button :disabled=<span class="string">"saveVideoBtnDisabled"</span> type=<span class="string">"primary"</span> @click=<span class="string">"saveOrUpdateVideo"</span>&gt;确 定&lt;<span class="regexp">/el-button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    &lt;<span class="regexp">/el-dialog&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    &lt;!-- 章节 --&gt;</span></span><br><span class="line"><span class="regexp">    &lt;ul class="chanpterList"&gt;</span></span><br><span class="line"><span class="regexp">        &lt;li</span></span><br><span class="line"><span class="regexp">            v-for="chapter in chapterVideoList"</span></span><br><span class="line"><span class="regexp">            :key="chapter.id"&gt;</span></span><br><span class="line"><span class="regexp">            &lt;p&gt;</span></span><br><span class="line"><span class="regexp">                &#123;&#123; chapter.title &#125;&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">                &lt;span class="acts"&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;el-button style="" type="text" @click="openVideo(chapter.id)"&gt;添加小节&lt;/</span>el-button&gt;</span><br><span class="line">                    &lt;el-button style=<span class="string">""</span> type=<span class="string">"text"</span> @click=<span class="string">"openEditChatper(chapter.id)"</span>&gt;编辑&lt;<span class="regexp">/el-button&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;el-button type="text" @click="removeChapter(chapter.id)"&gt;删除&lt;/</span>el-button&gt;</span><br><span class="line">                &lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>p&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!-- 视频 --&gt;</span><br><span class="line">            &lt;ul <span class="class"><span class="keyword">class</span></span>=<span class="string">"chanpterList videoList"</span>&gt;</span><br><span class="line">                &lt;li</span><br><span class="line">                    v-<span class="keyword">for</span>=<span class="string">"video in chapter.children"</span></span><br><span class="line">                    :key=<span class="string">"video.id"</span>&gt;</span><br><span class="line">                    &lt;p&gt;&#123;&#123; video.title &#125;&#125;</span><br><span class="line">                      &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">"acts"</span>&gt;</span><br><span class="line">                    </span><br><span class="line">                        &lt;el-button style=<span class="string">""</span> type=<span class="string">"text"</span> @click=<span class="string">"openEditVideo(video.id)"</span>&gt;编辑&lt;<span class="regexp">/el-button&gt;</span></span><br><span class="line"><span class="regexp">                        &lt;el-button type="text" @click="removeVideo(video.id)"&gt;删除&lt;/</span>el-button&gt;</span><br><span class="line">                      &lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;/</span>p&gt;</span><br><span class="line">                &lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/u</span>l&gt;</span><br><span class="line">        &lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/u</span>l&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;el-button @click=<span class="string">"previous"</span>&gt;上一步&lt;<span class="regexp">/el-button&gt;</span></span><br><span class="line"><span class="regexp">        &lt;el-button :disabled="saveBtnDisabled" type="primary" @click="next"&gt;下一步&lt;/</span>el-button&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">import chapter from '@/</span>api/edu/chapter<span class="string">'</span></span><br><span class="line"><span class="string">import video from '</span>@/api/edu/video<span class="string">'</span></span><br><span class="line"><span class="string">export default &#123;</span></span><br><span class="line"><span class="string">    data()&#123;</span></span><br><span class="line"><span class="string">        return&#123;</span></span><br><span class="line"><span class="string">            saveBtnDisabled: false,</span></span><br><span class="line"><span class="string">            saveVideoBtnDisabled: false,</span></span><br><span class="line"><span class="string">            chapterVideoList: [],</span></span><br><span class="line"><span class="string">            courseId: "",</span></span><br><span class="line"><span class="string">            chapter: &#123;</span></span><br><span class="line"><span class="string">              title: "",</span></span><br><span class="line"><span class="string">              sort: ""</span></span><br><span class="line"><span class="string">            &#125;,</span></span><br><span class="line"><span class="string">            video: &#123;</span></span><br><span class="line"><span class="string">              title: '</span><span class="string">',</span></span><br><span class="line"><span class="string">              sort: 0,</span></span><br><span class="line"><span class="string">              Free: 0,</span></span><br><span class="line"><span class="string">              videoSourceId: '</span><span class="string">'</span></span><br><span class="line"><span class="string">            &#125;,</span></span><br><span class="line"><span class="string">            dialogChapterFormVisible: false,</span></span><br><span class="line"><span class="string">            dialogVideoFormVisible: false</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    created()&#123;</span></span><br><span class="line"><span class="string">      //如果有id值则查询章节信息，没有就是添加章节信息</span></span><br><span class="line"><span class="string">      if(this.$route.params &amp;&amp; this.$route.params.id)&#123;</span></span><br><span class="line"><span class="string">        this.courseId = this.$route.params.id</span></span><br><span class="line"><span class="string">        this.getChaptersByCourseId()</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    methods: &#123;</span></span><br><span class="line"><span class="string">//================================小节crud对应的方法=========================================</span></span><br><span class="line"><span class="string">      //打开添加小节弹框</span></span><br><span class="line"><span class="string">      openVideo(chapterId)&#123;</span></span><br><span class="line"><span class="string">        //弹框</span></span><br><span class="line"><span class="string">        this.dialogVideoFormVisible = true</span></span><br><span class="line"><span class="string">        //清空，注意清空和设置id的顺序，不能反过来</span></span><br><span class="line"><span class="string">        this.video = &#123;&#125;</span></span><br><span class="line"><span class="string">        //设置章节id</span></span><br><span class="line"><span class="string">        this.video.chapterId = chapterId</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      //添加小节</span></span><br><span class="line"><span class="string">      addVideo()&#123;</span></span><br><span class="line"><span class="string">        this.video.courseId = this.courseId</span></span><br><span class="line"><span class="string">        video.addVideo(this.video)</span></span><br><span class="line"><span class="string">          .then(response =&gt; &#123;</span></span><br><span class="line"><span class="string">            //关闭弹框</span></span><br><span class="line"><span class="string">            this.dialogVideoFormVisible = false</span></span><br><span class="line"><span class="string">            //提示信息</span></span><br><span class="line"><span class="string">            this.$message(&#123;</span></span><br><span class="line"><span class="string">              type: '</span>success<span class="string">',</span></span><br><span class="line"><span class="string">              message: '</span>添加小节成功!<span class="string">'</span></span><br><span class="line"><span class="string">            &#125;);</span></span><br><span class="line"><span class="string">            //刷新页面</span></span><br><span class="line"><span class="string">            this.getChaptersByCourseId()</span></span><br><span class="line"><span class="string">          &#125;)</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      //修改小节信息</span></span><br><span class="line"><span class="string">      updateVideo()&#123;</span></span><br><span class="line"><span class="string">        video.updateVideo(this.video)</span></span><br><span class="line"><span class="string">          .then(response =&gt; &#123;</span></span><br><span class="line"><span class="string">            //关弹框，提示信息，刷新页面</span></span><br><span class="line"><span class="string">            //关闭弹框</span></span><br><span class="line"><span class="string">            this.dialogVideoFormVisible = false</span></span><br><span class="line"><span class="string">            //提示</span></span><br><span class="line"><span class="string">            this.$message(&#123;</span></span><br><span class="line"><span class="string">                type: '</span>success<span class="string">',</span></span><br><span class="line"><span class="string">                message: '</span>修改小节成功!<span class="string">'</span></span><br><span class="line"><span class="string">            &#125;);</span></span><br><span class="line"><span class="string">            //刷新页面</span></span><br><span class="line"><span class="string">            this.getChaptersByCourseId()</span></span><br><span class="line"><span class="string">          &#125;)</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      //点击小节编辑按钮，数据回显</span></span><br><span class="line"><span class="string">      openEditVideo(videoId)&#123;</span></span><br><span class="line"><span class="string">        this.dialogVideoFormVisible = true//弹框</span></span><br><span class="line"><span class="string">        video.getVideo(videoId)</span></span><br><span class="line"><span class="string">          .then(response =&gt; &#123;</span></span><br><span class="line"><span class="string">            this.video = response.data.eduVideo</span></span><br><span class="line"><span class="string">          &#125;)</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      //删除小节信息</span></span><br><span class="line"><span class="string">      removeVideo(videoId)&#123;</span></span><br><span class="line"><span class="string">        //弹框提示</span></span><br><span class="line"><span class="string">        //为了用户体验，应该弹框提醒</span></span><br><span class="line"><span class="string">        this.$confirm('</span>确定需要删除此小节记录吗？<span class="string">', '</span>提示<span class="string">', &#123;</span></span><br><span class="line"><span class="string">            confirmButtonText: '</span>确定<span class="string">',</span></span><br><span class="line"><span class="string">            cancelButtonText: '</span>取消<span class="string">',</span></span><br><span class="line"><span class="string">            type: '</span>warning<span class="string">'</span></span><br><span class="line"><span class="string">          &#125;).then(() =&gt; &#123;//点击确定执行</span></span><br><span class="line"><span class="string">            video.deleteVideo(videoId)</span></span><br><span class="line"><span class="string">              .then(response =&gt; &#123;</span></span><br><span class="line"><span class="string">                this.$message(&#123;//删除成功后弹框</span></span><br><span class="line"><span class="string">                  type: '</span>success<span class="string">',</span></span><br><span class="line"><span class="string">                  message: '</span>删除小节成功!<span class="string">'</span></span><br><span class="line"><span class="string">                &#125;);</span></span><br><span class="line"><span class="string">                //删除成功后需要重新查询所有</span></span><br><span class="line"><span class="string">                this.getChaptersByCourseId()</span></span><br><span class="line"><span class="string">              &#125;)</span></span><br><span class="line"><span class="string">          &#125;)</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      saveOrUpdateVideo()&#123;</span></span><br><span class="line"><span class="string">        if(!this.video.id)&#123;</span></span><br><span class="line"><span class="string">          this.addVideo()</span></span><br><span class="line"><span class="string">        &#125;else&#123;</span></span><br><span class="line"><span class="string">          this.updateVideo()</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//================================章节crud对应的方法=======================================</span></span><br><span class="line"><span class="string">      //点击编辑弹框并数据回显</span></span><br><span class="line"><span class="string">      openEditChatper(chapterId)&#123;</span></span><br><span class="line"><span class="string">        this.dialogChapterFormVisible = true</span></span><br><span class="line"><span class="string">        chapter.getChapter(chapterId)</span></span><br><span class="line"><span class="string">          .then(response =&gt; &#123;</span></span><br><span class="line"><span class="string">            this.chapter = response.data.chapter</span></span><br><span class="line"><span class="string">          &#125;)</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      //删除章节信息</span></span><br><span class="line"><span class="string">      removeChapter(chapterId)&#123;</span></span><br><span class="line"><span class="string">        //弹框提示</span></span><br><span class="line"><span class="string">        //为了用户体验，应该弹框提醒</span></span><br><span class="line"><span class="string">        this.$confirm('</span>确定需要删除此章节记录吗？<span class="string">', '</span>提示<span class="string">', &#123;</span></span><br><span class="line"><span class="string">            confirmButtonText: '</span>确定<span class="string">',</span></span><br><span class="line"><span class="string">            cancelButtonText: '</span>取消<span class="string">',</span></span><br><span class="line"><span class="string">            type: '</span>warning<span class="string">'</span></span><br><span class="line"><span class="string">          &#125;).then(() =&gt; &#123;//点击确定执行</span></span><br><span class="line"><span class="string">            chapter.deleteChapter(chapterId)</span></span><br><span class="line"><span class="string">              .then(response =&gt; &#123;</span></span><br><span class="line"><span class="string">                this.$message(&#123;//删除成功后弹框</span></span><br><span class="line"><span class="string">                  type: '</span>success<span class="string">',</span></span><br><span class="line"><span class="string">                  message: '</span>删除章节成功!<span class="string">'</span></span><br><span class="line"><span class="string">                &#125;);</span></span><br><span class="line"><span class="string">                //删除成功后需要重新查询所有</span></span><br><span class="line"><span class="string">                this.getChaptersByCourseId()</span></span><br><span class="line"><span class="string">              &#125;)</span></span><br><span class="line"><span class="string">          &#125;)</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      //添加章节方法</span></span><br><span class="line"><span class="string">      addChapter()&#123;</span></span><br><span class="line"><span class="string">        //设置当前所属课程id</span></span><br><span class="line"><span class="string">        this.chapter.courseId = this.courseId</span></span><br><span class="line"><span class="string">        chapter.addChapter(this.chapter)</span></span><br><span class="line"><span class="string">          .then(response =&gt; &#123;</span></span><br><span class="line"><span class="string">            //关闭弹框</span></span><br><span class="line"><span class="string">            this.dialogChapterFormVisible = false</span></span><br><span class="line"><span class="string">            //提示信息</span></span><br><span class="line"><span class="string">            this.$message(&#123;</span></span><br><span class="line"><span class="string">              type: '</span>success<span class="string">',</span></span><br><span class="line"><span class="string">              message: '</span>添加成功!<span class="string">'</span></span><br><span class="line"><span class="string">            &#125;);</span></span><br><span class="line"><span class="string">            //刷新页面</span></span><br><span class="line"><span class="string">            this.getChaptersByCourseId()</span></span><br><span class="line"><span class="string">          &#125;)</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      //修改章节方法</span></span><br><span class="line"><span class="string">      updateChapter()&#123;</span></span><br><span class="line"><span class="string">        chapter.updateChapter(this.chapter)</span></span><br><span class="line"><span class="string">          .then(response =&gt; &#123;</span></span><br><span class="line"><span class="string">            //关弹框，提示信息，刷新页面</span></span><br><span class="line"><span class="string">            //关闭弹框</span></span><br><span class="line"><span class="string">            this.dialogChapterFormVisible = false</span></span><br><span class="line"><span class="string">            //提示</span></span><br><span class="line"><span class="string">            this.$message(&#123;</span></span><br><span class="line"><span class="string">                type: '</span>success<span class="string">',</span></span><br><span class="line"><span class="string">                message: '</span>修改章节成功!<span class="string">'</span></span><br><span class="line"><span class="string">            &#125;);</span></span><br><span class="line"><span class="string">            //刷新页面</span></span><br><span class="line"><span class="string">            this.getChaptersByCourseId()</span></span><br><span class="line"><span class="string">          &#125;)</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      //打开弹框</span></span><br><span class="line"><span class="string">      openChapterDialog()&#123;</span></span><br><span class="line"><span class="string">        this.dialogChapterFormVisible = true</span></span><br><span class="line"><span class="string">        //因为第二次打开添加章节的时候，会显示上一次添加的章节信息，所以每次点击添加章节的时候应该初始化一下</span></span><br><span class="line"><span class="string">        this.chapter.title = ""</span></span><br><span class="line"><span class="string">        this.chapter.sort = 0</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      </span></span><br><span class="line"><span class="string">      //根据课程id查询章节列表信息</span></span><br><span class="line"><span class="string">      getChaptersByCourseId()&#123;</span></span><br><span class="line"><span class="string">        chapter.getChaptersByCourseId(this.courseId)</span></span><br><span class="line"><span class="string">          .then(response =&gt; &#123;</span></span><br><span class="line"><span class="string">            this.chapterVideoList = response.data.chapterList</span></span><br><span class="line"><span class="string">          &#125;)</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      //上一步点击事件</span></span><br><span class="line"><span class="string">      previous()&#123;</span></span><br><span class="line"><span class="string">          this.$router.push(&#123;path:"/course/info/" + this.courseId&#125;)</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      //下一步点击事件</span></span><br><span class="line"><span class="string">      next()&#123;</span></span><br><span class="line"><span class="string">          this.$router.push(&#123;path: '</span>/course/publish/<span class="string">' + this.courseId&#125;)</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      saveOrUpdate()&#123;</span></span><br><span class="line"><span class="string">        //判断是否携带章节id</span></span><br><span class="line"><span class="string">        if(!this.chapter.id)&#123;</span></span><br><span class="line"><span class="string">          this.addChapter()</span></span><br><span class="line"><span class="string">        &#125;else&#123;</span></span><br><span class="line"><span class="string">          this.updateChapter()</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;style scoped&gt;</span></span><br><span class="line"><span class="string">.chanpterList&#123;</span></span><br><span class="line"><span class="string">    position: relative;</span></span><br><span class="line"><span class="string">    list-style: none;</span></span><br><span class="line"><span class="string">    margin: 0;</span></span><br><span class="line"><span class="string">    padding: 0;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">.chanpterList li&#123;</span></span><br><span class="line"><span class="string">  position: relative;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">.chanpterList p&#123;</span></span><br><span class="line"><span class="string">  float: left;</span></span><br><span class="line"><span class="string">  font-size: 20px;</span></span><br><span class="line"><span class="string">  margin: 10px 0;</span></span><br><span class="line"><span class="string">  padding: 10px;</span></span><br><span class="line"><span class="string">  height: 70px;</span></span><br><span class="line"><span class="string">  line-height: 50px;</span></span><br><span class="line"><span class="string">  width: 100%;</span></span><br><span class="line"><span class="string">  border: 1px solid #DDD;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">.chanpterList .acts &#123;</span></span><br><span class="line"><span class="string">    float: right;</span></span><br><span class="line"><span class="string">    font-size: 14px;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">.videoList&#123;</span></span><br><span class="line"><span class="string">  padding-left: 50px;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">.videoList p&#123;</span></span><br><span class="line"><span class="string">  float: left;</span></span><br><span class="line"><span class="string">  font-size: 14px;</span></span><br><span class="line"><span class="string">  margin: 10px 0;</span></span><br><span class="line"><span class="string">  padding: 10px;</span></span><br><span class="line"><span class="string">  height: 50px;</span></span><br><span class="line"><span class="string">  line-height: 30px;</span></span><br><span class="line"><span class="string">  width: 100%;</span></span><br><span class="line"><span class="string">  border: 1px dotted #DDD;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;/style&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="4、发布课程开发"><a href="#4、发布课程开发" class="headerlink" title="4、发布课程开发"></a>4、发布课程开发</h2><h3 id="业务分析"><a href="#业务分析" class="headerlink" title="业务分析"></a>业务分析</h3><p>点击发布课程前，需要客户确认自己前面填写的信息， 也就是最终的课程信息，需要在这一界面现实出来，按照之前的做法就是新建实体类封装数据，但是这里设计太多张表了，这种方法不适合</p>
<p>所以这里自己写sql语句是最方便的，也就是联表查询，回顾一下联表查询包括：</p>
<p>比如有两张表</p>
<p>内连接：只显示两张表中有关联的数据</p>
<p>左外连接：左边的表的字段都显示，数据显示有个关联的，没有关联的就是默认值</p>
<p>右外连接：同理</p>
<p>而我们一般都会采取左外连接：例如</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * </span><br><span class="line"><span class="keyword">FROM</span> edu_course ec </span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> edu_course_description ecd <span class="keyword">ON</span> ec.<span class="string">`id`</span> = ecd.<span class="string">`id`</span></span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> edu_teacher et <span class="keyword">ON</span> ec.<span class="string">`teacher_id`</span> = et.<span class="string">`id`</span></span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> edu_subject es1 <span class="keyword">ON</span> ec.<span class="string">`subject_parent_id`</span> = es1.<span class="string">`id`</span></span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> edu_subject es2 <span class="keyword">ON</span> ec.<span class="string">`subject_id`</span> = es2.<span class="string">`id`</span></span><br><span class="line"><span class="keyword">WHERE</span> ec.<span class="string">`id`</span> = <span class="number">18</span></span><br></pre></td></tr></table></figure>

<p>查询结果：</p>
<p><img src= "/img/loading.gif" data-src="https://my-pic-bed-01.oss-cn-shenzhen.aliyuncs.com/img/20200707114500.png" alt="image-20200707114500192"></p>
<p>根据业务需求，我们需要在这一步显示的课程内容类似如下</p>
<p><img src= "/img/loading.gif" data-src="https://my-pic-bed-01.oss-cn-shenzhen.aliyuncs.com/img/20200707112858.png" alt="image-20200707112851500"></p>
<h3 id="后端开发"><a href="#后端开发" class="headerlink" title="后端开发"></a>后端开发</h3><h4 id="编写数据封装实体类-1"><a href="#编写数据封装实体类-1" class="headerlink" title="编写数据封装实体类"></a>编写数据封装实体类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CoursePublishVo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line">    <span class="keyword">private</span> String cover;</span><br><span class="line">    <span class="keyword">private</span> Integer lessonNum;</span><br><span class="line">    <span class="keyword">private</span> String subjectLevelOne;</span><br><span class="line">    <span class="keyword">private</span> String subjectLevelTwo;</span><br><span class="line">    <span class="keyword">private</span> String teacherName;</span><br><span class="line">    <span class="keyword">private</span> String price;<span class="comment">//只用于显示</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="编写mapper接口"><a href="#编写mapper接口" class="headerlink" title="编写mapper接口"></a>编写mapper接口</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">EduCourseMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">EduCourse</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">CoursePublishVo <span class="title">getPublishCourseInfo</span><span class="params">(String courseId)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="编写mapper-xml"><a href="#编写mapper-xml" class="headerlink" title="编写mapper.xml"></a>编写mapper.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.ryan.eduservice.mapper.EduCourseMapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getPublishCourseInfo"</span> <span class="attr">resultType</span>=<span class="string">"com.ryan.eduservice.entity.vo.CoursePublishVo"</span>&gt;</span></span><br><span class="line">        SELECT</span><br><span class="line">            ec.id,ec.title,ec.cover,ec.lesson_num as lessonNum,</span><br><span class="line">            es1.title as subjectLevelOne,es2.title as subjectLevelTwo,</span><br><span class="line">            et.name as teacherName,ec.price</span><br><span class="line">        FROM edu_course ec</span><br><span class="line">                 LEFT JOIN edu_course_description ecd ON ec.id = ecd.id</span><br><span class="line">                 LEFT JOIN edu_teacher et ON ec.teacher_id = et.id</span><br><span class="line">                 LEFT JOIN edu_subject es1 ON ec.subject_parent_id = es1.id</span><br><span class="line">                 LEFT JOIN edu_subject es2 ON ec.subject_id = es2.id</span><br><span class="line">        WHERE ec.id = #&#123;courseId&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="service层接口-1"><a href="#service层接口-1" class="headerlink" title="service层接口"></a>service层接口</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">EduCourseMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">EduCourse</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">CoursePublishVo <span class="title">getPublishCourseInfo</span><span class="params">(String courseId)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="service层实现类-1"><a href="#service层实现类-1" class="headerlink" title="service层实现类"></a>service层实现类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> CoursePublishVo <span class="title">getPublishCourseById</span><span class="params">(String courseId)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//如果是自己写的mapper，必须使用bashMapper，不能使用this调用方法</span></span><br><span class="line">    CoursePublishVo publishCourseInfo = baseMapper.getPublishCourseInfo(courseId);</span><br><span class="line">    <span class="keyword">return</span> publishCourseInfo;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="controller层-1"><a href="#controller层-1" class="headerlink" title="controller层"></a>controller层</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取最终发布的课程信息</span></span><br><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/getPublishCourseInfo/&#123;courseId&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">getPublishCourseInfo</span><span class="params">(@PathVariable String courseId)</span></span>&#123;</span><br><span class="line">    CoursePublishVo coursePublishVo = eduCourseService.getPublishCourseById(courseId);</span><br><span class="line">    <span class="keyword">return</span> R.ok().data(<span class="string">"coursePublishVo"</span>,coursePublishVo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//发布课程</span></span><br><span class="line"><span class="comment">//从数据可表格中可以看到课程有一个状态，Draft表示未发布，Normal表示已发布</span></span><br><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"/publishCourse/&#123;id&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">publishCourse</span><span class="params">(@PathVariable String id)</span></span>&#123;</span><br><span class="line">    EduCourse eduCourse = <span class="keyword">new</span> EduCourse();</span><br><span class="line">    eduCourse.setId(id);</span><br><span class="line">    eduCourse.setStatus(<span class="string">"Normal"</span>);</span><br><span class="line">    eduCourseService.updateById(eduCourse);</span><br><span class="line">    <span class="keyword">return</span> R.ok();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="swagger后端自测"><a href="#swagger后端自测" class="headerlink" title="swagger后端自测"></a>swagger后端自测</h4><p>测试发现报错，熟悉的异常：<code>BindingException</code></p>
<p>问题分析：</p>
<p>dao层编译后只有class文件，没有mapper.xml，因为maven工程在默认情况下src/main/java目录下的所有资源文件是不发布到target目录下的，</p>
<p><img src= "/img/loading.gif" data-src="https://my-pic-bed-01.oss-cn-shenzhen.aliyuncs.com/img/20200707124735.png" alt="img"></p>
<p>解决方案：</p>
<ul>
<li>直接将xml目录复制到target中（不通用，不推荐）</li>
<li>将mapper放到resource目录下（导致目录结构改变，不推荐）</li>
<li>配置pom.xml和application.yml文件，通用方法，推荐使用，具体操作如下</li>
</ul>
<p>在pom.xml中添加以下配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--项目打包时会将java目录中的*.xml文件也进行打包--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在application.yml中添加以下配置</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置mapper xml文件的路径</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:com/ryan/eduservice/mapper/xml/*.xml</span></span><br></pre></td></tr></table></figure>

<p>再次测试成功</p>
<p><img src= "/img/loading.gif" data-src="https://my-pic-bed-01.oss-cn-shenzhen.aliyuncs.com/img/20200707125123.png" alt="image-20200707125123561"></p>
<h3 id="前端开发"><a href="#前端开发" class="headerlink" title="前端开发"></a>前端开发</h3><h4 id="api-2"><a href="#api-2" class="headerlink" title="api"></a>api</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取发布课程内容</span></span><br><span class="line">getPublishCourseInfo(id)&#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">'/eduservice/edu-course/getPublishCourseInfo/'</span> + id,</span><br><span class="line">        method: <span class="string">'get'</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//发布课程</span></span><br><span class="line">publishCourse(id)&#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">'/eduservice/edu-course/publishCourse/'</span> + id,</span><br><span class="line">        method: <span class="string">'post'</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="publish-vue"><a href="#publish-vue" class="headerlink" title="publish.vue"></a>publish.vue</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"></span><br><span class="line">  &lt;div class&#x3D;&quot;app-container&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h2 style&#x3D;&quot;text-align: center;&quot;&gt;发布新课程&lt;&#x2F;h2&gt;</span><br><span class="line"></span><br><span class="line">    &lt;el-steps :active&#x3D;&quot;3&quot; process-status&#x3D;&quot;wait&quot; align-center style&#x3D;&quot;margin-bottom: 40px;&quot;&gt;</span><br><span class="line">      &lt;el-step title&#x3D;&quot;填写课程基本信息&quot;&#x2F;&gt;</span><br><span class="line">      &lt;el-step title&#x3D;&quot;创建课程大纲&quot;&#x2F;&gt;</span><br><span class="line">      &lt;el-step title&#x3D;&quot;发布课程&quot;&#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;el-steps&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div class&#x3D;&quot;ccInfo&quot;&gt;</span><br><span class="line">      &lt;img :src&#x3D;&quot;coursePublish.cover&quot;&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;main&quot;&gt;</span><br><span class="line">        &lt;h2&gt;&#123;&#123; coursePublish.title &#125;&#125;&lt;&#x2F;h2&gt;</span><br><span class="line">        &lt;p class&#x3D;&quot;gray&quot;&gt;&lt;span&gt;共&#123;&#123; coursePublish.lessonNum &#125;&#125;课时&lt;&#x2F;span&gt;&lt;&#x2F;p&gt;</span><br><span class="line">        &lt;p&gt;&lt;span&gt;所属分类：&#123;&#123; coursePublish.subjectLevelOne &#125;&#125; — &#123;&#123; coursePublish.subjectLevelTwo &#125;&#125;&lt;&#x2F;span&gt;&lt;&#x2F;p&gt;</span><br><span class="line">        &lt;p&gt;课程讲师：&#123;&#123; coursePublish.teacherName &#125;&#125;&lt;&#x2F;p&gt;</span><br><span class="line">        &lt;h3 class&#x3D;&quot;red&quot;&gt;￥&#123;&#123; coursePublish.price &#125;&#125;&lt;&#x2F;h3&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;el-button @click&#x3D;&quot;previous&quot;&gt;返回修改&lt;&#x2F;el-button&gt;</span><br><span class="line">      &lt;el-button :disabled&#x3D;&quot;saveBtnDisabled&quot; type&#x3D;&quot;primary&quot; @click&#x3D;&quot;publish&quot;&gt;发布课程&lt;&#x2F;el-button&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import course from &#39;@&#x2F;api&#x2F;edu&#x2F;course&#39;</span><br><span class="line">export default &#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">        return&#123;</span><br><span class="line">            saveBtnDisabled: false,</span><br><span class="line">            courseId: &quot;&quot;,</span><br><span class="line">            coursePublish:&#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    created()&#123;</span><br><span class="line">      if(this.$route.params &amp;&amp; this.$route.params.id)&#123;</span><br><span class="line">        &#x2F;&#x2F;设置id</span><br><span class="line">        this.courseId &#x3D; this.$route.params.id</span><br><span class="line">        &#x2F;&#x2F;调用获取最终课程信息方法</span><br><span class="line">        this.getPublishCourse()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      &#x2F;&#x2F;获取最终课程信息方法</span><br><span class="line">      getPublishCourse()&#123;</span><br><span class="line">        course.getPublishCourseInfo(this.courseId)</span><br><span class="line">          .then(response &#x3D;&gt; &#123;</span><br><span class="line">            this.coursePublish &#x3D; response.data.coursePublishVo</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">      previous()&#123;</span><br><span class="line">          this.$router.push(&#123;path:&quot;&#x2F;course&#x2F;chapter&#x2F;&quot; + this.courseId&#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">      publish()&#123;</span><br><span class="line">        &#x2F;&#x2F;调用方法,提示信息，路由跳转</span><br><span class="line">        course.publishCourse(this.courseId)</span><br><span class="line">          .then(response &#x3D;&gt; &#123;</span><br><span class="line">            &#x2F;&#x2F;提示</span><br><span class="line">            this.$message(&#123;</span><br><span class="line">                type: &#39;success&#39;,</span><br><span class="line">                message: &#39;发布成功!&#39;</span><br><span class="line">            &#125;);</span><br><span class="line">            &#x2F;&#x2F;跳转到第二步,注意需要携带id</span><br><span class="line">            this.$router.push(&#123;path: &#39;&#x2F;course&#x2F;list&#39;&#125;)</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.ccInfo &#123;</span><br><span class="line">    background: #f5f5f5;</span><br><span class="line">    padding: 20px;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">    border: 1px dashed #DDD;</span><br><span class="line">    margin-bottom: 40px;</span><br><span class="line">    position: relative;</span><br><span class="line">&#125;</span><br><span class="line">.ccInfo img &#123;</span><br><span class="line">    background: #d6d6d6;</span><br><span class="line">    width: 500px;</span><br><span class="line">    height: 278px;</span><br><span class="line">    display: block;</span><br><span class="line">    float: left;</span><br><span class="line">    border: none;</span><br><span class="line">&#125;</span><br><span class="line">.ccInfo .main &#123;</span><br><span class="line">    margin-left: 520px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.ccInfo .main h2 &#123;</span><br><span class="line">    font-size: 28px;</span><br><span class="line">    margin-bottom: 30px;</span><br><span class="line">    line-height: 1;</span><br><span class="line">    font-weight: normal;</span><br><span class="line">&#125;</span><br><span class="line">.ccInfo .main p &#123;</span><br><span class="line">    margin-bottom: 10px;</span><br><span class="line">    word-wrap: break-word;</span><br><span class="line">    line-height: 24px;</span><br><span class="line">    max-height: 48px;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.ccInfo .main p &#123;</span><br><span class="line">    margin-bottom: 10px;</span><br><span class="line">    word-wrap: break-word;</span><br><span class="line">    line-height: 24px;</span><br><span class="line">    max-height: 48px;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line">.ccInfo .main h3 &#123;</span><br><span class="line">    left: 540px;</span><br><span class="line">    bottom: 20px;</span><br><span class="line">    line-height: 1;</span><br><span class="line">    font-size: 28px;</span><br><span class="line">    color: #d32f24;</span><br><span class="line">    font-weight: normal;</span><br><span class="line">    position: absolute;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<h4 id="测试效果"><a href="#测试效果" class="headerlink" title="测试效果"></a>测试效果</h4><p><img src= "/img/loading.gif" data-src="https://my-pic-bed-01.oss-cn-shenzhen.aliyuncs.com/img/20200707131920.png" alt="image-20200707131919988"></p>
<h2 id="5、课程列表开发"><a href="#5、课程列表开发" class="headerlink" title="5、课程列表开发"></a>5、课程列表开发</h2><h3 id="业务分析-1"><a href="#业务分析-1" class="headerlink" title="业务分析"></a>业务分析</h3><p>首先我们要知道这个课程列表想要怎么一个效果，具体跟讲师列表差不多的，主要分为查询、列表、分页</p>
<p>然后每个课程有编辑和删除的功能</p>
<p><img src= "/img/loading.gif" data-src="https://my-pic-bed-01.oss-cn-shenzhen.aliyuncs.com/img/20200707143334.png" alt="image-20200707143334254"></p>
<h3 id="后端开发-1"><a href="#后端开发-1" class="headerlink" title="后端开发"></a>后端开发</h3><h4 id="编写课程查询实体类封装"><a href="#编写课程查询实体类封装" class="headerlink" title="编写课程查询实体类封装"></a>编写课程查询实体类封装</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CourseQuery</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value = <span class="string">"课程名称，模糊查询"</span>)</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value = <span class="string">"发布状态，Draft表示为发布，Normal表示已发布"</span>)</span><br><span class="line">    <span class="keyword">private</span> String status;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value = <span class="string">"查询开始时间，如2020-06-01 10:00:00"</span>)</span><br><span class="line">    <span class="keyword">private</span> String begin;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value = <span class="string">"查询结束时间，如2020-07-01 10:00:10"</span>)</span><br><span class="line">    <span class="keyword">private</span> String end;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="service层接口-2"><a href="#service层接口-2" class="headerlink" title="service层接口"></a>service层接口</h4><p>EduCourseService</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">List&lt;EduCourse&gt; <span class="title">getCourseByPage</span><span class="params">(<span class="keyword">long</span> current, <span class="keyword">long</span> pageSize)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Page&lt;EduCourse&gt; <span class="title">getCourseCondition</span><span class="params">(<span class="keyword">long</span> current, <span class="keyword">long</span> pageSize, CourseQuery courseQuery)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">deleteCourse</span><span class="params">(String courseId)</span></span>;</span><br></pre></td></tr></table></figure>

<p>EduVideoService</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">EduVideoService</span> <span class="keyword">extends</span> <span class="title">IService</span>&lt;<span class="title">EduVideo</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">removeVideo</span><span class="params">(String courseId)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>EduChapterService</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">removeChapter</span><span class="params">(String courseId)</span></span>;</span><br></pre></td></tr></table></figure>

<h4 id="service层实现类-2"><a href="#service层实现类-2" class="headerlink" title="service层实现类"></a>service层实现类</h4><p>EduCourseServiceImpl</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//分页查询课程</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;EduCourse&gt; <span class="title">getCourseByPage</span><span class="params">(<span class="keyword">long</span> current, <span class="keyword">long</span> pageSize)</span> </span>&#123;</span><br><span class="line">    Page&lt;EduCourse&gt; coursePage = <span class="keyword">new</span> Page&lt;&gt;(current, pageSize);</span><br><span class="line">    baseMapper.selectPage(coursePage, <span class="keyword">null</span>);</span><br><span class="line">    <span class="keyword">return</span> coursePage.getRecords();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Page&lt;EduCourse&gt; <span class="title">getCourseCondition</span><span class="params">(<span class="keyword">long</span> current, <span class="keyword">long</span> pageSize, CourseQuery courseQuery)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//创建page对象</span></span><br><span class="line">    Page&lt;EduCourse&gt; coursePage = <span class="keyword">new</span> Page&lt;&gt;(current, pageSize);</span><br><span class="line">    <span class="comment">//创建查询条件</span></span><br><span class="line">    QueryWrapper&lt;EduCourse&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    String title = courseQuery.getTitle();</span><br><span class="line">    String status = courseQuery.getStatus();</span><br><span class="line">    String begin = courseQuery.getBegin();</span><br><span class="line">    String end = courseQuery.getEnd();</span><br><span class="line">    <span class="keyword">if</span> (!StringUtils.isEmpty(title))&#123;</span><br><span class="line">        wrapper.like(<span class="string">"title"</span>, title);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!StringUtils.isEmpty(status))&#123;</span><br><span class="line">        wrapper.eq(<span class="string">"status"</span>, status);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!StringUtils.isEmpty(begin))&#123;</span><br><span class="line">        wrapper.ge(<span class="string">"gmt_create"</span>, begin);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!StringUtils.isEmpty(end))&#123;</span><br><span class="line">        wrapper.le(<span class="string">"gmt_modified"</span>, end);</span><br><span class="line">    &#125;</span><br><span class="line">    baseMapper.selectPage(coursePage, wrapper);</span><br><span class="line">    <span class="keyword">return</span> coursePage;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//删除课程信息</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteCourse</span><span class="params">(String courseId)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//删除视频</span></span><br><span class="line">    <span class="comment">//删除小节</span></span><br><span class="line">    eduVideoService.removeVideo(courseId);</span><br><span class="line">    <span class="comment">//删除章节</span></span><br><span class="line">    eduChapterService.removeChapter(courseId);</span><br><span class="line">    <span class="comment">//删除简介</span></span><br><span class="line">    eduCourseDescriptionService.removeById(courseId);</span><br><span class="line">    <span class="comment">//删除课程</span></span><br><span class="line">    <span class="keyword">int</span> count = baseMapper.deleteById(courseId);</span><br><span class="line">    <span class="keyword">if</span>(count == <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">"删除失败"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>EduVideoServiceImpl</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeVideo</span><span class="params">(String courseId)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//注意这里不能直接调用deleteById()方法删除，因为这里传的是courseId，而不是id</span></span><br><span class="line">    QueryWrapper&lt;EduVideo&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    wrapper.eq(<span class="string">"course_Id"</span>, courseId);</span><br><span class="line">    baseMapper.delete(wrapper);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>EduChapterServiceImpl</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeChapter</span><span class="params">(String courseId)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//因为courseId不是id，所以不能直接deleteById</span></span><br><span class="line">    QueryWrapper&lt;EduChapter&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    wrapper.eq(<span class="string">"course_id"</span>, courseId);</span><br><span class="line">    baseMapper.delete(wrapper);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="controller层-2"><a href="#controller层-2" class="headerlink" title="controller层"></a>controller层</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查询所有课程</span></span><br><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/getAllCourseInfo"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">getAllCourseInfo</span><span class="params">()</span></span>&#123;</span><br><span class="line">    List&lt;EduCourse&gt; allList = eduCourseService.list(<span class="keyword">null</span>);</span><br><span class="line">    <span class="keyword">return</span> R.ok().data(<span class="string">"allList"</span>,allList);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//分页查询</span></span><br><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/pageCourse/&#123;current&#125;/&#123;pageSize&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">getCoursePage</span><span class="params">(@PathVariable <span class="keyword">long</span> current, @PathVariable <span class="keyword">long</span> pageSize)</span></span>&#123;</span><br><span class="line">    List&lt;EduCourse&gt; pageList = eduCourseService.getCourseByPage(current, pageSize);</span><br><span class="line">    <span class="keyword">return</span> R.ok().data(<span class="string">"pageList"</span>, pageList);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//查询所有课程列表（综合条件查询带分页）</span></span><br><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"/getCourseCondition/&#123;current&#125;/&#123;pageSize&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">getCourseCondition</span><span class="params">(@PathVariable <span class="keyword">long</span> current,</span></span></span><br><span class="line"><span class="function"><span class="params">                            @PathVariable <span class="keyword">long</span> pageSize,</span></span></span><br><span class="line"><span class="function"><span class="params">                            @RequestBody(required = <span class="keyword">false</span>)</span> CourseQuery courseQuery)</span>&#123;</span><br><span class="line">    Page&lt;EduCourse&gt; coursePage = eduCourseService.getCourseCondition(current, pageSize, courseQuery);</span><br><span class="line">    <span class="keyword">return</span> R.ok().data(<span class="string">"total"</span>, coursePage.getTotal()).data(<span class="string">"rows"</span>, coursePage.getRecords());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="swagger测试-1"><a href="#swagger测试-1" class="headerlink" title="swagger测试"></a>swagger测试</h4><p>略</p>
<h3 id="前端开发-1"><a href="#前端开发-1" class="headerlink" title="前端开发"></a>前端开发</h3><h4 id="api-3"><a href="#api-3" class="headerlink" title="api"></a>api</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查询所有课程列表</span></span><br><span class="line">getAllCourse()&#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">'/eduservice/edu-course/getAllCourseInfo'</span>,</span><br><span class="line">        method: <span class="string">'get'</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//分页查询课程</span></span><br><span class="line">getPageCourse(current,pageSize)&#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">`/eduservice/edu-course/pageCourse/<span class="subst">$&#123;current&#125;</span>/<span class="subst">$&#123;pageSize&#125;</span>`</span>,</span><br><span class="line">        method: <span class="string">'get'</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//综合条件分页查询</span></span><br><span class="line">getCourseCondition(current,pageSize,courseQuery)&#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">`/eduservice/edu-course/getCourseCondition/<span class="subst">$&#123;current&#125;</span>/<span class="subst">$&#123;pageSize&#125;</span>`</span>,</span><br><span class="line">        method: <span class="string">'post'</span>,</span><br><span class="line">        data: courseQuery</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//删除课程</span></span><br><span class="line">deleteCourseById(courseId)&#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">`/eduservice/edu-course/deleteCourse/<span class="subst">$&#123;courseId&#125;</span>`</span>,</span><br><span class="line">        method: <span class="string">'delete'</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="list-vue"><a href="#list-vue" class="headerlink" title="list.vue"></a>list.vue</h4><p>提示：页面和teacher的list差不多，直接复制过来修改一下即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;app-container&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--查询表单--&gt;</span><br><span class="line">    &lt;el-form :inline&#x3D;&quot;true&quot; class&#x3D;&quot;demo-form-inline&quot;&gt;</span><br><span class="line">      &lt;el-form-item&gt;</span><br><span class="line">        &lt;el-input v-model&#x3D;&quot;courseQuery.title&quot; placeholder&#x3D;&quot;课程名称&quot;&#x2F;&gt;</span><br><span class="line">      &lt;&#x2F;el-form-item&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-form-item&gt;</span><br><span class="line">        &lt;el-select v-model&#x3D;&quot;courseQuery.status&quot; clearable placeholder&#x3D;&quot;发布状态&quot;&gt;</span><br><span class="line">          &lt;el-option :value &#x3D; &#39;Normal&#39; label&#x3D;&quot;已发布&quot;&#x2F;&gt;</span><br><span class="line">          &lt;el-option :value &#x3D; &#39;Draft&#39; label&#x3D;&quot;未发布&quot;&#x2F;&gt;</span><br><span class="line">        &lt;&#x2F;el-select&gt;</span><br><span class="line">      &lt;&#x2F;el-form-item&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-form-item label&#x3D;&quot;添加时间&quot;&gt;</span><br><span class="line">        &lt;el-date-picker</span><br><span class="line">          v-model&#x3D;&quot;courseQuery.begin&quot;</span><br><span class="line">          type&#x3D;&quot;datetime&quot;</span><br><span class="line">          placeholder&#x3D;&quot;选择开始时间&quot;</span><br><span class="line">          value-format&#x3D;&quot;yyyy-MM-dd HH:mm:ss&quot;</span><br><span class="line">          default-time&#x3D;&quot;00:00:00&quot;</span><br><span class="line">        &#x2F;&gt;</span><br><span class="line">      &lt;&#x2F;el-form-item&gt;</span><br><span class="line">      &lt;el-form-item&gt;</span><br><span class="line">        &lt;el-date-picker</span><br><span class="line">          v-model&#x3D;&quot;courseQuery.end&quot;</span><br><span class="line">          type&#x3D;&quot;datetime&quot;</span><br><span class="line">          placeholder&#x3D;&quot;选择截止时间&quot;</span><br><span class="line">          value-format&#x3D;&quot;yyyy-MM-dd HH:mm:ss&quot;</span><br><span class="line">          default-time&#x3D;&quot;00:00:00&quot;</span><br><span class="line">        &#x2F;&gt;</span><br><span class="line">      &lt;&#x2F;el-form-item&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-button type&#x3D;&quot;primary&quot; icon&#x3D;&quot;el-icon-search&quot; @click&#x3D;&quot;getList()&quot;&gt;查询&lt;&#x2F;el-button&gt;</span><br><span class="line">      &lt;el-button type&#x3D;&quot;default&quot; @click&#x3D;&quot;resetData()&quot;&gt;清空&lt;&#x2F;el-button&gt;</span><br><span class="line">    &lt;&#x2F;el-form&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 表格 --&gt;</span><br><span class="line">    &lt;el-table</span><br><span class="line">      :data&#x3D;&quot;list&quot;</span><br><span class="line">      border</span><br><span class="line">      fit</span><br><span class="line">      highlight-current-row&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-table-column</span><br><span class="line">        label&#x3D;&quot;序号&quot;</span><br><span class="line">        width&#x3D;&quot;70&quot;</span><br><span class="line">        align&#x3D;&quot;center&quot;&gt;</span><br><span class="line">        &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;</span><br><span class="line">          &#123;&#123; (current - 1) * pageSize + scope.$index + 1 &#125;&#125;</span><br><span class="line">        &lt;&#x2F;template&gt;</span><br><span class="line">      &lt;&#x2F;el-table-column&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-table-column prop&#x3D;&quot;title&quot; label&#x3D;&quot;名称&quot;&#x2F;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-table-column label&#x3D;&quot;发布状态&quot; width&#x3D;&quot;80&quot;&gt;</span><br><span class="line">        &lt;!--scope就是整个表格的域，scope.row就是每条记录--&gt;</span><br><span class="line">        &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;</span><br><span class="line">          &#123;&#123; scope.row.status &#x3D;&#x3D;&#x3D; &#39;Normal&#39;?&#39;已发布&#39;:&#39;未发布&#39; &#125;&#125;</span><br><span class="line">        &lt;&#x2F;template&gt;</span><br><span class="line">      &lt;&#x2F;el-table-column&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-table-column prop&#x3D;&quot;lessonNum&quot; label&#x3D;&quot;课时数&quot;  width&#x3D;&quot;80&quot; &#x2F;&gt;</span><br><span class="line">      &lt;el-table-column prop&#x3D;&quot;price&quot; label&#x3D;&quot;价格&quot;  width&#x3D;&quot;80&quot;&#x2F;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-table-column prop&#x3D;&quot;gmtCreate&quot; label&#x3D;&quot;添加时间&quot; width&#x3D;&quot;160&quot;&#x2F;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-table-column prop&#x3D;&quot;buyCount&quot; label&#x3D;&quot;购买数&quot; width&#x3D;&quot;80&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-table-column label&#x3D;&quot;操作&quot; width&#x3D;&quot;200&quot; align&#x3D;&quot;center&quot;&gt;</span><br><span class="line">        &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;</span><br><span class="line">          &lt;router-link :to&#x3D;&quot;&#39;&#x2F;course&#x2F;info&#x2F;&#39;+scope.row.id&quot;&gt;</span><br><span class="line">            &lt;el-button type&#x3D;&quot;primary&quot; size&#x3D;&quot;mini&quot; icon&#x3D;&quot;el-icon-edit&quot;&gt;修改课程基本信息&lt;&#x2F;el-button&gt;</span><br><span class="line">          &lt;&#x2F;router-link&gt;</span><br><span class="line">          &lt;router-link :to&#x3D;&quot;&#39;&#x2F;course&#x2F;chapter&#x2F;&#39;+scope.row.id&quot;&gt;</span><br><span class="line">            &lt;el-button type&#x3D;&quot;primary&quot; size&#x3D;&quot;mini&quot; icon&#x3D;&quot;el-icon-edit&quot;&gt;修改课程章节信息&lt;&#x2F;el-button&gt;</span><br><span class="line">          &lt;&#x2F;router-link&gt;</span><br><span class="line">          &lt;el-button type&#x3D;&quot;danger&quot; size&#x3D;&quot;mini&quot; icon&#x3D;&quot;el-icon-delete&quot; @click&#x3D;&quot;removeCourseById(scope.row.id)&quot;&gt;删除课程&lt;&#x2F;el-button&gt;</span><br><span class="line">        &lt;&#x2F;template&gt;</span><br><span class="line">      &lt;&#x2F;el-table-column&gt;</span><br><span class="line">    &lt;&#x2F;el-table&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 分页 --&gt;</span><br><span class="line">    &lt;el-pagination</span><br><span class="line">      :current-page&#x3D;&quot;current&quot;</span><br><span class="line">      :page-size&#x3D;&quot;pageSize&quot;</span><br><span class="line">      :total&#x3D;&quot;total&quot;</span><br><span class="line">      style&#x3D;&quot;padding: 30px 0; text-align: center;&quot;</span><br><span class="line">      layout&#x3D;&quot;total, prev, pager, next, jumper&quot;</span><br><span class="line">      @current-change&#x3D;&quot;getList&quot;</span><br><span class="line">    &#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">&#x2F;&#x2F;引入调用teache.js文件</span><br><span class="line">import course from &#39;@&#x2F;api&#x2F;edu&#x2F;course&#39;</span><br><span class="line">export default &#123;</span><br><span class="line">  &#x2F;&#x2F;在这里编写核心代码，固定格式</span><br><span class="line">  data()&#123;&#x2F;&#x2F;定义变量和初始值</span><br><span class="line">    return&#123;&#x2F;&#x2F;参数以及查询出来的数据</span><br><span class="line">      list: null,&#x2F;&#x2F;查询结果</span><br><span class="line">      current: 1,&#x2F;&#x2F;当前页</span><br><span class="line">      pageSize: 3,&#x2F;&#x2F;每页记录数</span><br><span class="line">      total: 0,&#x2F;&#x2F;总记录数</span><br><span class="line">      courseQuery: &#123;</span><br><span class="line">          title: &#39;&#39;,</span><br><span class="line">          status: &#39;&#39;,</span><br><span class="line">          begin: &#39;&#39;,</span><br><span class="line">          end: &#39;&#39;</span><br><span class="line">      &#125;&#x2F;&#x2F;条件封装对象</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created()&#123;&#x2F;&#x2F;页面渲染之前执行，一般调用methods中定义的方法</span><br><span class="line">    &#x2F;&#x2F;一般都是先写methods，最后再在此调用方法</span><br><span class="line">    this.getList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;&#x2F;&#x2F;创建具体的方法，调用teacher.js中定义的方法</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;按照我们一开始学习的方法，是直接在这里使用axios.post.....</span><br><span class="line">    &#x2F;&#x2F;现在我们直接调用teacher.js的中的方法，而teacher.js中又封装了axios</span><br><span class="line">    getList(current &#x3D; 1)&#123;&#x2F;&#x2F;es6规范定义方法</span><br><span class="line">      this.current &#x3D; current</span><br><span class="line">      course.getCourseCondition(this.current, this.pageSize, this.courseQuery)</span><br><span class="line">        .then(response &#x3D;&gt; &#123;</span><br><span class="line">          &#x2F;&#x2F;console.log(response)&#x2F;&#x2F;测试请求结果</span><br><span class="line">          this.list &#x3D; response.data.rows</span><br><span class="line">          this.total &#x3D; response.data.total</span><br><span class="line">        &#125;)&#x2F;&#x2F;请求成功</span><br><span class="line">        .catch(error &#x3D;&gt; &#123;</span><br><span class="line">          console.log(error)</span><br><span class="line">        &#125;)&#x2F;&#x2F;请求失败</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F;清空查询条件</span><br><span class="line">    resetData()&#123;</span><br><span class="line">      &#x2F;&#x2F;分两步，清空数据+查询所有</span><br><span class="line">      &#x2F;&#x2F;清空数据（双向绑定）</span><br><span class="line">      this.courseQuery &#x3D; &#123;&#125;</span><br><span class="line">      &#x2F;&#x2F;查询所有</span><br><span class="line">      this.getList()</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F;删除课程方法</span><br><span class="line">    removeCourseById(id)&#123;</span><br><span class="line">        &#x2F;&#x2F;为了用户体验，应该弹框提醒</span><br><span class="line">      this.$confirm(&#39;确定需要删除此课程所有信息吗？&#39;, &#39;提示&#39;, &#123;</span><br><span class="line">          confirmButtonText: &#39;确定&#39;,</span><br><span class="line">          cancelButtonText: &#39;取消&#39;,</span><br><span class="line">          type: &#39;warning&#39;</span><br><span class="line">        &#125;).then(() &#x3D;&gt; &#123;&#x2F;&#x2F;点击确定执行</span><br><span class="line">          course.deleteCourseById(id).then(response &#x3D;&gt; &#123;</span><br><span class="line">            this.$message(&#123;&#x2F;&#x2F;删除成功后弹框</span><br><span class="line">            type: &#39;success&#39;,</span><br><span class="line">            message: &#39;删除课程成功!&#39;</span><br><span class="line">            &#125;);</span><br><span class="line">            &#x2F;&#x2F;删除成功后需要重新查询所有</span><br><span class="line">            this.getList()</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h4><p><img src= "/img/loading.gif" data-src="https://my-pic-bed-01.oss-cn-shenzhen.aliyuncs.com/img/20200707161621.png" alt="image-20200707161621081"></p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Ryan</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://yoursite.com/2020/07/06/%E7%B2%92%E5%AD%A6%E9%99%A2%E5%AE%9E%E6%88%98day04%E2%80%94%E8%AF%BE%E7%A8%8B%E7%AE%A1%E7%90%86%E5%BC%80%E5%8F%91-1/">http://yoursite.com/2020/07/06/%E7%B2%92%E5%AD%A6%E9%99%A2%E5%AE%9E%E6%88%98day04%E2%80%94%E8%AF%BE%E7%A8%8B%E7%AE%A1%E7%90%86%E5%BC%80%E5%8F%91-1/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://yoursite.com" target="_blank">Ryan</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/vue/">vue</a><a class="post-meta__tags" href="/tags/springboot/">springboot</a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><button class="reward-button"><i class="fas fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="/img/wechat.jpg" alt="wechat" onclick="window.open('/img/wechat.jpg')"/><div class="post-qr-code__desc">wechat</div></li></ul></div></button></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/07/08/%E7%B2%92%E5%AD%A6%E9%99%A2%E5%AE%9E%E6%88%98day05%E2%80%94%E8%AF%BE%E7%A8%8B%E7%AE%A1%E7%90%86%E5%BC%80%E5%8F%91-2-%E5%BE%AE%E6%9C%8D%E5%8A%A1springcloud/"><img class="prev-cover" data-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">谷粒学院实战day05—课程管理开发(2)+微服务springcloud</div></div></a></div><div class="next-post pull-right"><a href="/2020/07/04/%E5%AD%A6%E9%99%A2%E5%AE%9E%E6%88%98day03%E2%80%94%E9%98%BF%E9%87%8C%E4%BA%91%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8-niginx-easyexcel-%E8%AF%BE%E7%A8%8B%E5%88%86%E7%B1%BB%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91/"><img class="next-cover" data-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">谷粒学院实战day03—阿里云对象存储+niginx+easyexcel+课程分类模块开发</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/06/24/ringboot-vue前后端分离博客项目/" title="springboot+vue前后端分离博客项目"><img class="relatedPosts_cover" data-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-06-24</div><div class="relatedPosts_title">springboot+vue前后端分离博客项目</div></div></a></div><div class="relatedPosts_item"><a href="/2020/07/04/学院实战day03—阿里云对象存储-niginx-easyexcel-课程分类模块开发/" title="谷粒学院实战day03—阿里云对象存储+niginx+easyexcel+课程分类模块开发"><img class="relatedPosts_cover" data-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-04</div><div class="relatedPosts_title">谷粒学院实战day03—阿里云对象存储+niginx+easyexcel+课程分类模块开发</div></div></a></div><div class="relatedPosts_item"><a href="/2020/07/08/粒学院实战day05—课程管理开发-2-微服务springcloud/" title="谷粒学院实战day05—课程管理开发(2)+微服务springcloud"><img class="relatedPosts_cover" data-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-08</div><div class="relatedPosts_title">谷粒学院实战day05—课程管理开发(2)+微服务springcloud</div></div></a></div><div class="relatedPosts_item"><a href="/2020/06/24/前端入门——VUE/" title="前端入门——VUE"><img class="relatedPosts_cover" data-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-06-24</div><div class="relatedPosts_title">前端入门——VUE</div></div></a></div><div class="relatedPosts_item"><a href="/2020/07/02/学院项目实战day02—讲师管理前端模块开发/" title="谷粒学院项目实战day02—ES6规范+讲师管理前端模块开发"><img class="relatedPosts_cover" data-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-02</div><div class="relatedPosts_title">谷粒学院项目实战day02—ES6规范+讲师管理前端模块开发</div></div></a></div><div class="relatedPosts_item"><a href="/2020/06/24/ringboot入门-实战/" title="Springboot入门+实战"><img class="relatedPosts_cover" data-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-06-24</div><div class="relatedPosts_title">Springboot入门+实战</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var requestSetting = function (from,set) {
  var from = from
  var setting = set.split(',').filter(function(item){
  return from.indexOf(item) > -1
  });
  setting = setting.length == 0 ? from :setting;
  return setting
}

var guestInfo = requestSetting(['nick','mail','link'],'nick,mail,link')
var requiredFields = requestSetting(['nick','mail'],'nick,mail')

window.valine = new Valine({
  el:'#vcomment',
  appId: 'hCTAXV9K2j6lRxnNWaeqXmHJ-gzGzoHsz',
  appKey: 'bL3PlAeQjsLS33uYxl0f7BVr',
  placeholder: '记得留下你的昵称和邮箱，可以快速收到回复哦',
  avatar: 'monsterid',
  meta: guestInfo,
  pageSize: '10',
  lang: 'zh-CN',
  recordIP: false,
  serverURLs: '',
  emojiCDN: '',
  emojiMaps: "",
  enableQQ: false,
  requiredFields: requiredFields
});</script></div></article></main><footer id="footer" style="background-image: url(https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2020 By Ryan</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="footer_custom_text"><a href="https://ryan0824.github.io/" target="_blank" rel="noopener">Hi, welcome to myblog</a>!</div><div class="icp"><a><img class="icp-icon" src="/img/icp.png"/><span>粤ICP备20003954号-1</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><button id="readmode" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" title="缩小字体"><i class="fas fa-minus"></i></button><button class="translate_chn_to_cht" id="translateLink" title="简繁转换">繁</button><button id="darkmode" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" title="设置"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fas fa-comments"></i></a><button class="close" id="mobile-toc-button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="/js/search/local-search.js"></script></body></html>